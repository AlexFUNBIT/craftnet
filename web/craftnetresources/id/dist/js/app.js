(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)r=o[u],i[r]&&p.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},i={app:0},a=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;a.push([0,"chunk-vendors","chunk-common"]),n()})({0:function(e,t,n){e.exports=n("90e9")},"4b04":function(e,t,n){"use strict";var s=n("cbec"),i=n.n(s);i.a},"5c88":function(e,t,n){},"63b6":function(e,t,n){"use strict";var s=n("5c88"),i=n.n(s);i.a},"90e9":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),i=n("2f62"),a=(n("7f7f"),n("4917"),n("7514"),n("bc3a")),r=n.n(a),o=n("4328"),c=n.n(o),l={savePlugin:function(e,t,n){var s=e.plugin,i=new FormData;for(var a in s)if(null!==s[a]&&void 0!==s[a])switch(a){case"iconId":case"categoryIds":case"screenshots":case"screenshotUrls":case"screenshotIds":for(var o=0;o<s[a].length;o++)i.append(a+"[]",s[a][o]);break;default:i.append(a,s[a])}r.a.post(Craft.actionUrl+"/craftnet/plugins/save",i,{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},submitPlugin:function(e,t,n){var s={pluginId:e};r.a.post(Craft.actionUrl+"/craftnet/plugins/submit",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},generateApiToken:function(e,t){r.a.post(Craft.actionUrl+"/craftnet/id/account/generate-api-token",{},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(t){return e(t)}).catch(function(e){return t(e.response)})}};s["default"].use(i["a"]);var d={hasApiToken:!1,plugins:[],sales:[]},u={repositoryIsInUse:function(e){return function(t){return e.plugins.find(function(e){return e.repository===t})}},getSaleById:function(e){return function(t){if(e.sales)return e.sales.find(function(e){return e.id==t})}}},p={savePlugin:function(e,t){var n=e.commit,s=t.plugin;return new Promise(function(e,t){l.savePlugin({plugin:s},function(i){i.data.success?(n("savePlugin",{plugin:s,response:i}),e(i)):t(i)},function(e){t(e)})})},submitPlugin:function(e,t){var n=e.commit;return new Promise(function(e,s){l.submitPlugin(t,function(i){i.data.success?(n("submitPlugin",{pluginId:t}),e(i)):s(i)},function(e){s(e)})})},generateApiToken:function(e){var t=e.commit;return new Promise(function(e,n){l.generateApiToken(function(s){s.data&&!s.data.error?(t("updateHasApiToken",{hasApiToken:!!s.data.apiToken}),e(s)):n(s)},function(e){n(e)})})}},f={updatePlugins:function(e,t){var n=t.plugins;e.plugins=n},updateSales:function(e,t){var n=t.sales;e.sales=n},savePlugin:function(e,t){var n=t.plugin,s=t.response,i=!1,a=e.plugins.find(function(e){return e.id==n.pluginId});a||(a={id:s.data.id},i=!0);var r=s.data.iconUrl;r&&(r=r+(r.match(/\?/g)?"&":"?")+Math.floor(1e6*Math.random())),a.siteId=n.siteId,a.pluginId=s.data.id,a.icon=n.icon,a.iconUrl=r,a.iconId=s.data.iconId,a.developerId=n.developerId,a.developerName=n.developerName,a.handle=n.handle,a.packageName=n.packageName,a.name=n.name,a.shortDescription=n.shortDescription,a.longDescription=n.longDescription,a.documentationUrl=n.documentationUrl,a.changelogPath=n.changelogPath,a.repository=n.repository,a.license=n.license,a.keywords=n.keywords;var o=parseFloat(n.price);a.price=o||null;var c=parseFloat(n.renewalPrice);a.renewalPrice=c||null,a.categoryIds=n.categoryIds;var l=[],d=[];if(s.data.screenshots.length>0)for(var u=0;u<s.data.screenshots.length;u++)l.push(s.data.screenshots[u].id),d.push(s.data.screenshots[u].url);a.screenshotIds=l,a.screenshotUrls=d,i&&e.plugins.push(a)},submitPlugin:function(e,t){var n=t.pluginId,s=e.plugins.find(function(e){return e.id==n});s.pendingApproval=!0},updateHasApiToken:function(e,t){var n=t.hasApiToken;e.hasApiToken=n}},h={namespaced:!0,state:d,getters:u,actions:p,mutations:f},m={disconnectApp:function(e,t,n){var s={appTypeHandle:e};r.a.post(Craft.actionUrl+"/craftnet/id/apps/disconnect",c.a.stringify(s)).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},saveUser:function(e,t,n){var s=new FormData;for(var i in e)switch(i){case"id":s.append("userId",e[i]);break;case"email":case"username":case"firstName":case"lastName":case"password":case"newPassword":case"photo":s.append(i,e[i]);break;default:s.append("fields["+i+"]",e[i])}r.a.post(Craft.actionUrl+"/users/save-user",s,{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},saveBillingInfo:function(e,t,n){r.a.post(Craft.actionUrl+"/craftnet/id/account/save-billing-info",c.a.stringify(e),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},uploadUserPhoto:function(e,t,n){var s=new FormData;for(var i in e)s.append(i,e[i]);r.a.post(Craft.actionUrl+"/craftnet/id/account/upload-user-photo",s,{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},deleteUserPhoto:function(e,t){r.a.post(Craft.actionUrl+"/craftnet/id/account/delete-user-photo",{},{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(t){return e(t)}).catch(function(e){return t(e.response)})},getStripeAccount:function(e,t){r.a.get(window.craftIdUrl+"/stripe/account").then(function(t){return e(t)}).catch(function(e){return t(e.response)})},disconnectStripeAccount:function(e,t){r.a.post(window.craftIdUrl+"/stripe/disconnect").then(function(t){return e(t)}).catch(function(e){return t(e.response)})},saveCard:function(e,t,n){var s={token:e.id};r.a.post(window.craftIdUrl+"/stripe/save-card",c.a.stringify(s)).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},removeCard:function(e,t){r.a.post(window.craftIdUrl+"/stripe/remove-card").then(function(t){return e(t)}).catch(function(e){return t(e.response)})},getInvoices:function(e,t){r.a.get(Craft.actionUrl+"/craftnet/id/account/get-invoices").then(function(t){return e(t)}).catch(function(e){return t(e.response)})}};s["default"].use(i["a"]);var v={apps:{},billingAddress:null,card:null,cardToken:null,currentUser:null,invoices:[],stripeAccount:null,stripeCustomer:null,upcomingInvoice:null},g={userIsInGroup:function(e){return function(t){return e.currentUser.groups.find(function(e){return e.handle===t})}},getInvoiceByNumber:function(e){return function(t){if(e.invoices)return e.invoices.find(function(e){return e.number==t})}}},b={connectAppCallback:function(e,t){var n=e.commit;n("updateApps",{apps:t})},disconnectApp:function(e,t){var n=e.commit;return new Promise(function(e,s){m.disconnectApp(t,function(s){n("disconnectApp",{appHandle:t}),e(s)},function(e){s(e)})})},deleteUserPhoto:function(e){var t=e.commit;return new Promise(function(e,n){m.deleteUserPhoto(function(n){t("deleteUserPhoto",{response:n}),e(n)},function(e){n(e)})})},saveUser:function(e,t){var n=e.commit;return new Promise(function(e,s){m.saveUser(t,function(i){i.data.errors?s(i):(n("saveUser",{user:t,response:i}),e(i))},function(e){s(e)})})},uploadUserPhoto:function(e,t){var n=e.commit;return new Promise(function(e,s){m.uploadUserPhoto(t,function(t){n("uploadUserPhoto",{response:t}),e(t)},function(e){s(e)})})},saveBillingInfo:function(e,t){var n=e.commit;return new Promise(function(e,s){m.saveBillingInfo(t,function(t){t.data.errors?s(t):(n("updateBillingAddress",{billingAddress:t.data.address}),e(t))},function(e){s(e)})})},removeCard:function(e){var t=e.commit;return new Promise(function(e,n){m.removeCard(function(n){t("removeStripeCard"),e(n)},function(e){n(e)})})},saveCard:function(e,t){var n=e.commit;return new Promise(function(e,s){m.saveCard(t,function(t){n("updateStripeCard",{card:t.data.card.card}),e(t)},function(e){s(e)})})},disconnectStripeAccount:function(e){var t=e.commit;return new Promise(function(e,n){m.disconnectStripeAccount(function(n){t("disconnectStripeAccount"),e(n)},function(e){n(e)})})},getStripeAccount:function(e){var t=e.commit;return new Promise(function(e,n){m.getStripeAccount(function(n){t("updateStripeAccount",{response:n}),e(n)},function(e){n(e)})})},getInvoices:function(e){var t=e.commit;return new Promise(function(e,n){m.getInvoices(function(s){s.data&&!s.data.error?(t("updateInvoices",{response:s}),e(s)):n(s)},function(e){n(e)})})},getAccountData:function(e){e.commit}},_={updateApps:function(e,t){var n=t.apps;e.apps=n},disconnectApp:function(e,t){var n=t.appHandle;s["default"].delete(e.apps,n)},uploadUserPhoto:function(e,t){var n=t.response;e.currentUser.photoId=n.data.photoId,e.currentUser.photoUrl=n.data.photoUrl},deleteUserPhoto:function(e,t){var n=t.response;e.currentUser.photoId=n.data.photoId,e.currentUser.photoUrl=n.data.photoUrl},saveUser:function(e,t){var n=t.user;t.response;for(var s in n)if("id"!==s&&"email"!==s&&(e.currentUser[s]=n[s],n.enablePluginDeveloperFeatures)){var i=e.currentUser.groups.find(function(e){return"developers"===e.handle});i||e.currentUser.groups.push({id:1,name:"Developers",handle:"developers"})}},updateBillingAddress:function(e,t){var n=t.billingAddress;e.billingAddress=n},updateCard:function(e,t){var n=t.card;e.card=n},updateCardToken:function(e,t){var n=t.cardToken;e.cardToken=n},updateCurrentUser:function(e,t){var n=t.currentUser;e.currentUser=n},removeStripeCard:function(e){e.card=null},updateStripeCard:function(e,t){var n=t.card;e.card=n},disconnectStripeAccount:function(e){e.stripeAccount=null},updateStripeAccount:function(e,t){var n=t.response;e.stripeAccount=n.data},updateInvoices:function(e,t){var n=t.response;e.invoices=n.data},updateUpcomingInvoice:function(e,t){var n=t.upcomingInvoice;e.upcomingInvoice=n}},C={namespaced:!0,state:v,getters:g,actions:b,mutations:_},y=(n("ac6a"),{claimCmsLicense:function(e,t,n){var s={key:e};r.a.post(Craft.actionUrl+"/craftnet/id/cms-licenses/claim",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},claimCmsLicenseFile:function(e,t,n){var s=new FormData;s.append("licenseFile",e),r.a.post(Craft.actionUrl+"/craftnet/id/cms-licenses/claim",s,{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},claimLicensesByEmail:function(e,t,n){var s={email:e};r.a.post(Craft.actionUrl+"/craftnet/id/claim-licenses",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},claimPluginLicense:function(e,t,n){var s={key:e};r.a.post(Craft.actionUrl+"/craftnet/id/plugin-licenses/claim",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},getCmsLicenses:function(e,t){r.a.get(Craft.actionUrl+"/craftnet/id/cms-licenses/get-licenses").then(function(t){return e(t)}).catch(function(e){return t(e.response)})},getPluginLicenses:function(e,t){r.a.get(Craft.actionUrl+"/craftnet/id/plugin-licenses/get-licenses").then(function(t){return e(t)}).catch(function(e){return t(e.response)})},releaseCmsLicense:function(e,t,n){var s={key:e};r.a.post(Craft.actionUrl+"/craftnet/id/cms-licenses/release",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},releasePluginLicense:function(e,t,n){var s=e.pluginHandle,i=e.licenseKey,a={handle:s,key:i};r.a.post(Craft.actionUrl+"/craftnet/id/plugin-licenses/release",c.a.stringify(a),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},saveCmsLicense:function(e,t,n){var s=e;r.a.post(Craft.actionUrl+"/craftnet/id/cms-licenses/save",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})},savePluginLicense:function(e,t,n){var s={};for(var i in e)"cmsLicense"!==i&&(s[i]=e[i]);r.a.post(Craft.actionUrl+"/craftnet/id/plugin-licenses/save",c.a.stringify(s),{headers:{"X-CSRF-Token":Craft.csrfTokenValue}}).then(function(e){return t(e)}).catch(function(e){return n(e.response)})}});s["default"].use(i["a"]),s["default"].use(n("2ead"));var w=new s["default"],L={cmsLicenses:[],pluginLicenses:[]},k={expiresSoon:function(e){return function(e){if(!e.expiresOn)return!1;var t=new Date,n=new Date;n.setDate(t.getDate()+45);var s=new Date(e.expiresOn.date);return n>s}},daysBeforeExpiry:function(e){return function(e){var t=new Date,n=new Date(e.expiresOn.date),s=n.getTime()-t.getTime(),i=Math.round(s/864e5);return i}},expiringCmsLicenses:function(e,t){return e.cmsLicenses.filter(function(e){return!e.expired&&(!e.autoRenew&&t.expiresSoon(e))})},expiringPluginLicenses:function(e,t){return e.pluginLicenses.filter(function(e){return!e.expired&&(!e.autoRenew&&t.expiresSoon(e))})},renewableLicenses:function(e){var t=this;return function(n,s){var i=[];if(i.push({description:"Craft "+n.editionDetails.name,expiresOn:n.expiresOn,edition:n.editionDetails}),n.pluginLicenses.length>0){var a=n.pluginLicenses.filter(function(e){return!!e.key}),r=w.$moment(n.expiresOn.date),o=r.add(s,"years");a=e.pluginLicenses.filter(function(e){var t=w.$moment(e.expiresOn.date);return!(t>o)&&a.find(function(t){return t.id===e.id})}),a.forEach(function(e){i.push({description:e.plugin.name,expiresOn:e.expiresOn,edition:e.edition})}.bind(t))}return i}},newExpiresOn:function(){return function(e,t){var n=w.$moment(e.expiresOn.date);return n.add(t,"years")}},renewableLicensesTotal:function(e,t){return function(e,n,s){var i=0;return t.renewableLicenses(e,n).forEach(function(a,r){var o=s[r];o&&(i+=t.newExpiresOn(e,n).diff(a.expiresOn.date,"years",!0)*a.edition.renewalPrice)}),i}}},x={claimCmsLicense:function(e,t){e.commit;return new Promise(function(e,n){y.claimCmsLicense(t,function(t){t.data&&!t.data.error?e(t):n(t)},function(e){n(e)})})},claimCmsLicenseFile:function(e,t){e.commit;return new Promise(function(e,n){y.claimCmsLicenseFile(t,function(t){t.data&&!t.data.error?e(t):n(t)},function(e){n(e)})})},claimLicensesByEmail:function(e,t){e.commit;return new Promise(function(e,n){y.claimLicensesByEmail(t,function(t){t.data&&!t.data.error?e(t):n(t)},function(e){n(e)})})},claimPluginLicense:function(e,t){e.commit;return new Promise(function(e,n){y.claimPluginLicense(t,function(t){t.data&&!t.data.error?e(t):n(t)},function(e){n(e)})})},getCmsLicenses:function(e){var t=e.commit;return new Promise(function(e,n){y.getCmsLicenses(function(s){s.data&&!s.data.error?(t("updateCmsLicenses",{cmsLicenses:s.data}),e(s)):n(s)},function(e){n(e)})})},getPluginLicenses:function(e){var t=e.commit;return new Promise(function(e,n){y.getPluginLicenses(function(s){s.data&&!s.data.error?(t("updatePluginLicenses",{pluginLicenses:s.data}),e(s)):n(s)},function(e){n(e)})})},releaseCmsLicense:function(e,t){var n=e.commit;return new Promise(function(e,s){y.releaseCmsLicense(t,function(i){i.data&&!i.data.error?(n("releaseCmsLicense",{licenseKey:t}),e(i)):s(i)},function(e){s(e)})})},releasePluginLicense:function(e,t){var n=e.commit,s=t.pluginHandle,i=t.licenseKey;return new Promise(function(e,t){y.releasePluginLicense({pluginHandle:s,licenseKey:i},function(s){s.data&&!s.data.error?(n("releasePluginLicense",{licenseKey:i}),e(s)):t(s)},function(e){t(e)})})},saveCmsLicense:function(e,t){var n=e.commit;return new Promise(function(e,s){y.saveCmsLicense(t,function(t){t.data&&!t.data.error?(n("saveCmsLicense",{license:t.data.license}),e(t)):s(t)},function(e){s(e)})})},savePluginLicense:function(e,t){var n=e.commit;return new Promise(function(e,s){y.savePluginLicense(t,function(i){i.data&&!i.data.error?(n("savePluginLicense",{license:t}),e(i)):s(i)},function(e){s(e)})})}},D={updateCmsLicenses:function(e,t){var n=t.cmsLicenses;e.cmsLicenses=n},updatePluginLicenses:function(e,t){var n=t.pluginLicenses;e.pluginLicenses=n},releaseCmsLicense:function(e,t){var n=t.licenseKey;e.cmsLicenses.find(function(e,t,s){return e.key===n&&(s.splice(t,1),!0)})},releasePluginLicense:function(e,t){var n=t.licenseKey;e.pluginLicenses.find(function(e,t,s){return e.key===n&&(s.splice(t,1),!0)})},saveCmsLicense:function(e,t){var n=t.license,s=e.cmsLicenses.find(function(e){return e.key==n.key});for(var i in n)switch(i){case"autoRenew":s[i]=1===n[i]||"1"===n[i];break;default:s[i]=n[i]}},savePluginLicense:function(e,t){var n=t.license,s=e.pluginLicenses.find(function(e){return e.key==n.key});for(var i in n)switch(i){case"autoRenew":s[i]=1===n[i]||"1"===n[i];break;default:s[i]=n[i]}}},P={namespaced:!0,state:L,getters:k,actions:x,mutations:D},$={getCraftIdData:function(e,t){return r.a.post(Craft.actionUrl+"/craftnet/id/craft-id").then(function(t){return e(t)}).catch(function(e){return t(e.response)})}};s["default"].use(i["a"]);var I={categories:[],countries:[]},S={},O={getCraftIdData:function(e){var t=e.commit;return new Promise(function(e,n){$.getCraftIdData(function(n){t("updateCategories",{categories:n.data.categories}),t("updateCountries",{countries:n.data.countries}),t("developers/updateHasApiToken",{hasApiToken:n.data.currentUser.hasApiToken},{root:!0}),t("developers/updatePlugins",{plugins:n.data.plugins},{root:!0}),t("developers/updateSales",{sales:n.data.sales},{root:!0}),t("licenses/updateCmsLicenses",{cmsLicenses:n.data.cmsLicenses},{root:!0}),t("licenses/updatePluginLicenses",{pluginLicenses:n.data.pluginLicenses},{root:!0}),t("account/updateUpcomingInvoice",{upcomingInvoice:n.data.upcomingInvoice},{root:!0}),t("account/updateApps",{apps:n.data.apps},{root:!0}),t("account/updateCurrentUser",{currentUser:n.data.currentUser},{root:!0}),t("account/updateBillingAddress",{billingAddress:n.data.billingAddress},{root:!0}),t("account/updateCard",{card:n.data.card},{root:!0}),t("account/updateCardToken",{cardToken:n.data.cardToken},{root:!0}),e(n)},function(e){n(e)})})}},T={updateCategories:function(e,t){var n=t.categories;e.categories=n},updateCountries:function(e,t){var n=t.countries;e.countries=n}},A={namespaced:!0,state:I,getters:S,actions:O,mutations:T},N={getCart:function(e,t,n){r.a.get("https://api.craftcms.test/v1/carts/"+e).then(function(e){return t(e.data)}).catch(function(e){return n(e)})},createCart:function(e,t,n){r.a.post("https://api.craftcms.test/v1/carts",e).then(function(e){return t(e.data)}).catch(function(e){return n(e)})},updateCart:function(e,t,n,s){t.items&&t.items.forEach(function(e,t){e.cmsLicenseKey||delete e["cmsLicenseKey"]}),r.a.post("https://api.craftcms.test/v1/carts/"+e,t).then(function(e){return n(e.data)}).catch(function(e){return s(e)})},checkout:function(e){return r.a.post("https://api.craftcms.test/v1/payments",e,{withCredentials:!1})},resetOrderNumber:function(){localStorage.removeItem("orderNumber")},saveOrderNumber:function(e){localStorage.setItem("orderNumber",e)},getOrderNumber:function(e){var t=localStorage.getItem("orderNumber");return e(t)}};s["default"].use(i["a"]);var E={cart:null,mockCart:{items:[]}},U={cartTotal:function(e){var t=0;return e.mockCart.items.forEach(function(e){t+=parseFloat(e.lineItem.total)}),t},cartTotalItems:function(e){return e.cart&&e.cart.lineItems?e.cart.lineItems.length:0},cartItems:function(e,t,n){var s=[];if(e.cart){var i=e.cart.lineItems;i.forEach(function(e){var t={};t.lineItem=e,"plugin-edition"===e.purchasable.type&&(t.plugin=n.pluginStore.plugins.find(function(t){return t.handle===e.purchasable.plugin.handle})),s.push(t)})}return s}},M={getCart:function(e){var t=e.dispatch,n=e.commit,s=e.rootState,i=e.state;return new Promise(function(e,a){i.cart?e():t("getOrderNumber").then(function(i){if(i)N.getCart(i,function(i){if(i.error){var r={email:s.account.currentUser.email};N.createCart(r,function(s){n("updateCart",{response:s}),t("saveOrderNumber",{orderNumber:s.cart.number}),e(i)},function(e){a(e)})}else n("updateCart",{response:i}),e(i)},function(i){if(i.response.data.message&&"Cart Already Completed"===i.response.data.message){var r={email:s.account.currentUser.email};N.createCart(r,function(s){n("updateCart",{response:s}),t("saveOrderNumber",{orderNumber:s.cart.number}),e(i)},function(e){a(e)})}else a(i)});else{var r={email:s.account.currentUser.email};N.createCart(r,function(s){n("updateCart",{response:s}),t("saveOrderNumber",{orderNumber:s.cart.number}),e(s)},function(e){a(e)})}})})},saveCart:function(e,t){var n=e.commit,s=e.state;return new Promise(function(e,i){var a=s.cart;N.updateCart(a.number,t,function(t){t.errors?i(t):(n("updateCart",{response:t}),e(t))},function(e){i(e)})})},resetCart:function(e){var t=e.commit,n=e.dispatch;return new Promise(function(e,s){t("resetCart"),n("resetOrderNumber"),n("getCart").then(function(t){e(t)}).catch(function(e){s(e)})})},resetOrderNumber:function(){N.resetOrderNumber()},checkout:function(e,t){e.dispatch,e.commit;return new Promise(function(e,n){N.checkout(t).then(function(t){e(t)}).catch(function(e){n(e)})})},getOrderNumber:function(e){var t=e.state;return new Promise(function(e,n){if(t.cart&&t.cart.number){var s=t.cart.number;e(s)}else N.getOrderNumber(function(t){e(t)},function(e){n(e)})})},saveOrderNumber:function(e,t){e.state;var n=t.orderNumber;N.saveOrderNumber(n)},createCart:function(){var e={email:"ben@pixelandtonic.com"};r.a.post("https://api.craftcms.test/v1/carts",e).then(function(e){console.log("success")}).catch(function(e){console.log("error")})},addToCart:function(e,t){var n=e.commit,s=e.state,i=e.dispatch;return new Promise(function(e,a){i("getCart").then(function(){var i=s.cart,r=R.getCartItemsData(i);t.forEach(function(e){var t=r.find(function(t){return t.plugin===e.plugin});t||r.push(e)});var o={items:r};N.updateCart(i.number,o,function(t){n("updateCart",{response:t}),e(t)},function(e){a(e)})}).catch(a)})},removeFromCart:function(e,t){var n=e.commit,s=e.dispatch;return new Promise(function(e,i){s("getCart").then(function(){var s=E.cart,a=R.getCartItemsData(s);a.splice(t,1);var r={items:a};N.updateCart(s.number,r,function(t){n("updateCart",{response:t}),e(t)},function(e){i(e)})}).catch(i)})},addToCartMock:function(e,t){var n=e.commit,s=t.item;n("addToCartMock",{item:s})},removeFromCartMock:function(e,t){var n=e.commit;e.state;n("removeFromCartMock",{lineItemKey:t})}},j={updateCart:function(e,t){var n=t.response;e.cart=n.cart,e.stripePublicKey=n.stripePublicKey},addToCartMock:function(e,t){var n=t.item;e.mockCart.items.push(n)},removeFromCartMock:function(e,t){var n=t.lineItemKey;e.mockCart.items.splice(n,1)},resetCart:function(e){e.cart=null}},R={getCartData:function(e){var t={email:e.email,billingAddress:{firstName:e.billingAddress.firstName,lastName:e.billingAddress.lastName},items:[]};return t.items=this.getCartItemsData(e),t},getCartItemsData:function(e){for(var t=[],n=0;n<e.lineItems.length;n++){var s=e.lineItems[n];switch(s.purchasable.type){case"plugin-edition":t.push({type:s.purchasable.type,plugin:s.purchasable.plugin.handle,edition:s.purchasable.handle,autoRenew:s.options.autoRenew,cmsLicenseKey:s.options.cmsLicenseKey});break;case"cms-edition":t.push({type:s.purchasable.type,edition:s.purchasable.handle,licenseKey:s.options.licenseKey,autoRenew:s.options.autoRenew});break}}return t}},F={namespaced:!0,state:E,getters:U,actions:M,mutations:j};s["default"].use(i["a"]);var B={categories:[],featuredPlugins:[],plugins:[],pluginStoreDataLoaded:!1},V={getPluginByHandle:function(e){return function(t){return e.plugins.find(function(e){return e.handle===t})}}},H={getPluginStoreData:function(e){var t=e.commit,n=e.state;return new Promise(function(e,s){n.pluginStoreDataLoaded?e():r.a.get("https://api.craftcms.test/v1/plugin-store",{withCredentials:!1}).then(function(n){t("updatePluginStoreData",{response:n}),e()}).catch(s)})}},K={updatePluginStoreData:function(e,t){var n=t.response;e.categories=n.data.categories,e.featuredPlugins=n.data.featuredPlugins,e.plugins=n.data.plugins,e.pluginStoreDataLoaded=!0}},X={namespaced:!0,state:B,getters:V,actions:H,mutations:K};s["default"].use(i["a"]);var G=new i["a"].Store({strict:!0,modules:{craftId:A,account:C,developers:h,licenses:P,cart:F,pluginStore:X}}),W=(n("a481"),/(\d{3})(?=\d)/g);function z(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var s=Math.abs(e).toFixed(n),i=n?s.slice(0,-1-n):s,a=i.length%3,r=a>0?i.slice(0,a)+(i.length>3?",":""):"",o=n?s.slice(-1-n):"",c=e<0?"-":"";return c+t+r+i.slice(a).replace(W,"$1,")+o}function q(e){var t=e.replace(/(\r\n|\n|\r)/gm,""),n=[];t.length>0&&n.push(t.substr(0,50)),t.length>50&&n.push(t.substr(50,50)),t.length>100&&n.push(t.substr(100,50)),t.length>150&&n.push(t.substr(150,50)),t.length>200&&n.push(t.substr(200,50)),t.length>250&&n.push(t.substr(250));for(var s="",i=0;i<n.length;i++)s+=n[i],i<n.length-1&&(s+="\r\n");return s}function J(e){var t=[];t.push(e.substr(0,4)),t.push(e.substr(4,4)),t.push(e.substr(8,4)),t.push(e.substr(12,4)),t.push(e.substr(16,4)),t.push(e.substr(20));for(var n="",s=0;s<t.length;s++)n+=t[s],s<t.length-1&&(n+="-");return n}n("6b54");function Y(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""}var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("auth-manager",{ref:"authManager"}),e.$root.showRenewLicensesModal?n("renew-licenses-modal",{attrs:{license:e.$root.renewLicense},on:{cancel:function(t){e.$root.showRenewLicensesModal=!1}}}):e._e(),e.$root.notification?[n("div",{class:{hide:!e.$root.notification},attrs:{id:"notifications-wrapper"}},[n("div",{attrs:{id:"notifications"}},[n("div",{staticClass:"notification",class:e.$root.notification.type},[e._v(e._s(e.$root.notification.message))])])])]:e._e(),e.$root.loading?[e._m(0)]:[n("div",{staticClass:"app"},[n("div",{staticClass:"header"},[n("div",{staticClass:"header-left"},[n("a",{attrs:{id:"sidebar-toggle",href:"#"},on:{click:function(t){t.preventDefault(),e.toggleSidebar()}}},[n("font-awesome-icon",{attrs:{icon:e.showingSidebar?"times":"bars"}})],1),n("div",{staticClass:"header-brand"},[n("router-link",{attrs:{to:"/"}},[e._v("Craft ID")])],1)]),n("div",{staticClass:"header-right ml-4"},[n("ul",{staticClass:"list-reset flex items-center"},[n("li",{staticClass:"block ml-6 cart-menu"},[n("router-link",{staticClass:"block",attrs:{to:"/cart"}},[n("font-awesome-icon",{attrs:{icon:"shopping-cart"}}),n("div",{staticClass:"badge",class:{invisible:!e.cartTotalItems}},[e._v(e._s(e.cartTotalItems))])],1)],1),n("li",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.awayGlobalMenu,expression:"awayGlobalMenu"}],staticClass:"block ml-6 global-menu"},[n("a",{staticClass:"block toggle",on:{click:e.globalMenuToggle}},[n("font-awesome-icon",{attrs:{icon:"th"}})],1),n("div",{staticClass:"popover",class:{hidden:!e.showingGlobalMenu}},[n("div",[e._m(1),n("p",[n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){e.showingGlobalMenu=!1}}},[e._v("Craft ID")])],1)]),n("div",{staticClass:"popover-arrow"})])]),n("li",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.awayUserMenu,expression:"awayUserMenu"}],staticClass:"block ml-6 user-menu"},[n("a",{staticClass:"block toggle",on:{click:e.userMenuToggle}},[n("img",{attrs:{src:e.currentUser.photoUrl}})]),n("div",{staticClass:"popover",class:{hidden:!e.showingUserMenu}},[n("div",[e._v("\n                                    "+e._s(e.currentUser.email)+"\n                                ")]),n("hr"),n("ul",{staticClass:"list-reset"},[n("li",[n("router-link",{staticClass:"block py-1",attrs:{to:"/account/billing"},nativeOn:{click:function(t){e.showingUserMenu=!1}}},[e._v("Billing")])],1),n("li",[n("router-link",{staticClass:"block py-1",attrs:{to:"/account/settings"},nativeOn:{click:function(t){e.showingUserMenu=!1}}},[e._v("Account Settings")])],1)]),n("hr"),e._m(2),n("div",{staticClass:"popover-arrow"})])])])])]),n("div",{staticClass:"flex-container"},[n("div",{staticClass:"sidebar",class:{"showing-sidebar":e.showingSidebar}},[n("h5",[n("router-link",{attrs:{to:"/account/licenses"},nativeOn:{click:function(t){e.closeSidebar()}}},[n("font-awesome-icon",{attrs:{icon:"key"}}),e._v("\n                            Licenses\n                        ")],1)],1),n("ul",[n("li",[n("router-link",{attrs:{to:"/account/licenses/cms"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Craft CMS")])],1),n("li",[n("router-link",{attrs:{to:"/account/licenses/plugins"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Plugins")])],1),n("li",[n("router-link",{attrs:{to:"/account/licenses/claim"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Claim License")])],1),n("li",[n("router-link",{attrs:{to:"/buy"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Buy License")])],1)]),e.userIsInGroup("developers")?[n("h5",[n("router-link",{attrs:{to:"/developer"},nativeOn:{click:function(t){e.closeSidebar()}}},[n("font-awesome-icon",{attrs:{icon:"plug"}}),e._v("\n                                Developer\n                            ")],1)],1),n("ul",[n("li",[n("router-link",{attrs:{to:"/developer/plugins"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Plugins")])],1),n("li",[n("router-link",{attrs:{to:"/developer/sales"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Sales")])],1),n("li",[n("router-link",{attrs:{to:"/account/profile"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Profile")])],1),n("li",[n("router-link",{attrs:{to:"/developer/settings"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Settings")])],1)])]:e._e(),n("h5",[n("router-link",{attrs:{to:"/account"},nativeOn:{click:function(t){e.closeSidebar()}}},[n("font-awesome-icon",{attrs:{icon:"user"}}),e._v("\n                            Account\n                        ")],1)],1),n("ul",[n("li",[n("router-link",{attrs:{to:"/account/billing"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Billing")])],1),n("li",[n("router-link",{attrs:{to:"/account/settings"},nativeOn:{click:function(t){e.closeSidebar()}}},[e._v("Settings")])],1)]),e.userIsInGroup("staff")&&e.currentUser.enableShowcaseFeatures?[n("h5",[n("a",{staticClass:"disabled",attrs:{href:"#"}},[n("font-awesome-icon",{attrs:{icon:"image"}}),e._v("\n                                Showcase\n                            ")],1)]),e._m(3)]:e._e()],2),n("div",{staticClass:"main"},[n("div",{staticClass:"main-content"},[n("router-view",{key:e.$route.path})],1)])])])]],2)},Z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center"},[n("div",{staticClass:"spinner big mt-8"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"http://localhost:3000/",target:"_blank"}},[e._v("Craft Plugins")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{attrs:{href:"/logout"}},[e._v("Logout")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{staticClass:"disabled",attrs:{href:"#"}},[e._v("Activity")])]),n("li",[n("a",{staticClass:"disabled",attrs:{href:"#"}},[e._v("Projects")])]),n("li",[n("a",{staticClass:"disabled",attrs:{href:"#"}},[e._v("Agency Profile")])])])}],ee=n("c93e"),te=n("8c4f"),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.userDraft?n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("h1",[e._v("Profile")]),n("text-field",{attrs:{id:"developerName",label:"Developer Name",errors:e.errors.developerName},model:{value:e.userDraft.developerName,callback:function(t){e.$set(e.userDraft,"developerName",t)},expression:"userDraft.developerName"}}),n("url-field",{attrs:{id:"developerUrl",label:"Developer URL",errors:e.errors.developerUrl},model:{value:e.userDraft.developerUrl,callback:function(t){e.$set(e.userDraft,"developerUrl",t)},expression:"userDraft.developerUrl"}}),n("text-field",{attrs:{id:"location",label:"Location",errors:e.errors.location},model:{value:e.userDraft.location,callback:function(t){e.$set(e.userDraft,"location",t)},expression:"userDraft.location"}}),n("hr"),n("h2",[e._v("Photo")]),n("div",{staticClass:"flex"},[n("div",{},[n("img",{ref:"photo",staticClass:"img-thumbnail mr-3",staticStyle:{width:"150px",height:"150px"},attrs:{src:e.userDraft.photoUrl}})]),n("div",[e.userDraft.photoId?[n("div",{staticClass:"field"},[n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Change Photo",disabled:e.photoLoading},on:{click:e.changePhoto}})]),n("div",{staticClass:"field"},[n("a",{staticClass:"btn btn-danger",attrs:{href:"#",disabled:e.photoLoading},on:{click:function(t){return t.preventDefault(),e.deletePhoto(t)}}},[n("font-awesome-icon",{attrs:{icon:"times"}}),e._v("\n                        Delete\n                    ")],1)])]:[n("div",{staticClass:"field"},[n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Upload a photo",disabled:e.photoLoading},on:{click:e.changePhoto}})])],e.photoLoading?n("div",{staticClass:"spinner"}):e._e(),n("input",{ref:"photoFile",staticClass:"hidden",attrs:{type:"file"},on:{change:e.onChangePhoto}})],2)]),n("hr"),e._m(0),n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save",disabled:e.loading}}),e.loading?n("div",{staticClass:"spinner"}):e._e()],1):e._e()},se=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-secondary"},[n("em",[e._v("Your profile data is being used for your developer page on the Plugin Store.")])])}],ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-group"},[e.showStripe?n("stripe-app"):e._e(),e._l(e.appTypes,function(t,s){return[n("connected-app",{attrs:{name:t.name,description:"Connect to your "+t.name+" account.",icon:"/craftnetresources/id/dist/images/"+t.handle+".svg","account-name":e.accountName(t.handle),connected:e.apps[t.handle],buttonLoading:e.loading&&e.loading[t.handle]},on:{connect:function(n){e.connect(t.handle)},disconnect:function(n){e.disconnect(t.handle)}}}),s!=e.appTypes.length-1?n("hr"):e._e()]})],2)},ae=[],re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("connected-app",{attrs:{name:e.appType.name,description:"Connect to your "+e.appType.name+" account.",icon:"/craftnetresources/id/dist/images/"+e.appType.handle+".svg","account-name":e.stripeAccount?e.stripeAccount.display_name:"",connected:e.stripeAccount,buttonLoading:e.disconnectLoading,loading:e.loading},on:{connect:function(t){e.connect()},disconnect:function(t){e.disconnect()}}})},oe=[],ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-group-item"},[e.loading?[n("div",{staticClass:"spinner"})]:[n("div",{staticClass:"flex items-start"},[n("img",{staticClass:"flex mr-3",attrs:{src:e.icon,height:"48"}}),n("div",{staticClass:"flex-1"},[e.connected?[n("h5",[e._v(e._s(e.accountName))]),n("p",{staticClass:"mb-0"},[n("span",{staticClass:"text-secondary"},[e._v(e._s(e.name))])])]:[n("h5",[e._v(e._s(e.name))]),n("p",{staticClass:"mb-0"},[e._v(e._s(e.description))])]],2),n("div",{staticClass:"ml-4"},[e.connected?[n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(t){e.$emit("disconnect")}}},[e._v("Disconnect")])]:[n("button",{staticClass:"btn btn-primary",on:{click:function(t){t.preventDefault(),e.$emit("connect")}}},[e._v("Connect")])],e.buttonLoading?n("div",{staticClass:"mt-2 text-right"},[n("div",{staticClass:"spinner"})]):e._e()],2)])]],2)},le=[],de={props:["name","description","icon","accountName","connected","buttonLoading","loading"],data:function(){return{}}},ue=de,pe=n("2877"),fe=Object(pe["a"])(ue,ce,le,!1,null,null,null);fe.options.__file="ConnectedApp.vue";var he=fe.exports,me={data:function(){return{appType:{name:"Stripe",handle:"stripe"},disconnectLoading:!1}},components:{ConnectedApp:he},computed:Object(ee["a"])({},Object(i["d"])({stripeAccount:function(e){return e.account.stripeAccount}}),{loading:function(){return this.$root.stripeAccountLoading},stripeConnectUrl:function(){return window.stripeConnectUrl}}),methods:{connect:function(){window.location.href=this.stripeConnectUrl},disconnect:function(){var e=this;this.disconnectLoading=!0,this.$store.dispatch("account/disconnectStripeAccount").then(function(){e.disconnectLoading=!1,e.$root.displayNotice("Stripe account removed.")})}}},ve=me,ge=Object(pe["a"])(ve,re,oe,!1,null,null,null);ge.options.__file="StripeApp.vue";var be=ge.exports,_e={props:["title","showStripe"],data:function(){return{appTypes:[{handle:"github",name:"GitHub"}],loading:{bitbucket:!1,github:!1}}},components:{StripeApp:be,ConnectedApp:he},computed:Object(ee["a"])({},Object(i["d"])({apps:function(e){return e.account.apps},currentUser:function(e){return e.account.currentUser}}),Object(i["c"])({userIsInGroup:"account/userIsInGroup"})),methods:{accountName:function(e){if(this.apps[e]){var t=this.apps[e];switch(e){case"github":return t.account.name;case"bitbucket":return t.account.display_name}}},connect:function(e){var t=800,n=830;switch(e){case"bitbucket":t=1024,n=570;break}var s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=s/2-t/2,r=i/2-n/2,o="/apps/connect/"+e,c="ConnectWithOauth",l="location=0,status=0,width="+t+",height="+n+",left="+a+",top="+r;window.open(o,c,l)},disconnect:function(e){var t=this;this.loading[e]=!0,this.$store.dispatch("account/disconnectApp",e).then(function(n){t.loading[e]=!1,t.$root.displayNotice("App disconnected.")}).catch(function(n){t.loading[e]=!1;var s=n.data&&n.data.error?n.data.error:"Couldn’t disconnect app.";t.$root.displayError(s),t.errors=n.data&&n.data.errors?n.data.errors:{}})}}},Ce=_e,ye=Object(pe["a"])(Ce,ie,ae,!1,null,null,null);ye.options.__file="ConnectedApps.vue";var we=ye.exports,Le=n("d8ab"),ke={components:Object(ee["a"])({ConnectedApps:we},Le["a"]),data:function(){return{loading:!1,photoLoading:!1,userDraft:{},password:"",newPassword:"",errors:{}}},computed:Object(ee["a"])({},Object(i["d"])({currentUser:function(e){return e.account.currentUser}}),Object(i["c"])({userIsInGroup:"account/userIsInGroup"})),methods:{deletePhoto:function(e){var t=this;confirm("Are you sure you want to delete this image?")&&(this.photoLoading=!0,this.$store.dispatch("account/deleteUserPhoto").then(function(e){t.$root.displayNotice("Photo deleted."),t.userDraft.photoId=e.data.photoId,t.userDraft.photoUrl=e.data.photoUrl,t.photoLoading=!1}).catch(function(e){t.photoLoading=!1;var n=e.data&&e.data.error?e.data.error:"Couldn’t delete photo.";t.$root.displayError(n),t.errors=e.data&&e.data.errors?e.data.errors:{}}))},changePhoto:function(){this.$refs.photoFile.click()},onChangePhoto:function(e){var t=this;this.photoLoading=!0;var n={photo:this.$refs.photoFile.files[0],photoUrl:this.userDraft.photoUrl};this.$store.dispatch("account/uploadUserPhoto",n).then(function(e){t.$root.displayNotice("Photo uploaded.");var n=e.data.photoUrl;t.userDraft.photoId=e.data.photoId,t.userDraft.photoUrl=n+(n.match(/\?/g)?"&":"?")+Math.floor(1e6*Math.random()),t.errors={},t.photoLoading=!1}).catch(function(e){t.photoLoading=!1;var n=e.data&&e.data.error?e.data.error:"Couldn’t upload photo.";t.$root.displayError(n),t.errors=e.data&&e.data.errors?e.data.errors:{}})},save:function(){var e=this;this.loading=!0,this.$store.dispatch("account/saveUser",{id:this.userDraft.id,developerName:this.userDraft.developerName,developerUrl:this.userDraft.developerUrl,location:this.userDraft.location,photoUrl:this.userDraft.photoUrl}).then(function(t){e.$root.displayNotice("Settings saved."),e.errors={},e.loading=!1}).catch(function(t){e.loading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t save profile.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})}},mounted:function(){this.userDraft=JSON.parse(JSON.stringify(this.currentUser))}},xe=ke,De=Object(pe["a"])(xe,ne,se,!1,null,null,null);De.options.__file="Profile.vue";var Pe=De.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Billing")]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("billing-payment")],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("billing-address-form")],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("billing-invoice-details")],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Upcoming Invoice")]),n("invoices-table",{attrs:{invoices:[e.upcomingInvoice],upcoming:!0}})],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Invoices")]),e.$root.invoicesLoading?n("div",{staticClass:"spinner"}):[e.invoices&&e.invoices.length>0?n("invoices-table",{attrs:{invoices:e.invoices}}):n("p",{staticClass:"text-secondary"},[e._v("No invoices.")])]],2)])])},Ie=[],Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex-1"},[n("h4",[e._v("Payment")]),e.editing?e._e():n("div",[e.card?n("div",{staticClass:"credit-card"},[n("card-icon",{attrs:{brand:e.card.brand}}),n("ul",{staticClass:"list-reset"},[n("li",[e._v("Number: •••• •••• •••• "+e._s(e.card.last4))]),n("li",[e._v("Expiry: "+e._s(e.card.exp_month)+"/"+e._s(e.card.exp_year))])])],1):n("p",{staticClass:"text-secondary"},[e._v("Credit card not defined.")])]),n("div",{class:{hidden:!e.editing}},[n("card-form",{attrs:{loading:e.cardFormloading},on:{error:e.error,beforeSave:e.beforeSave,save:e.saveCard,cancel:e.cancel}})],1),e._m(0)]),e.editing?e._e():n("div",{staticClass:"pl-4"},[n("p",[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-facebox":"#billing-contact-info-modal"},on:{click:function(t){e.editing=!0}}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n                    New Card\n                ")],1)]),e.card?n("p",[n("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(t){e.removeCard()}}},[n("font-awesome-icon",{attrs:{icon:"times"}}),e._v("\n                    Remove\n                ")],1)]):e._e(),e.removeCardLoading?n("div",{staticClass:"spinner"}):e._e(),n("p")])])])},Oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-3"},[n("img",{attrs:{src:"/craftnetresources/id/dist/images/powered_by_stripe.svg",height:"18"}})])}],Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("div",{ref:"cardElement",staticClass:"card-element form-control mb-3",attrs:{id:"card-element"}}),n("p",{staticClass:"text-red",attrs:{id:"card-errors",role:"alert"}}),n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save"}}),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){e.cancel()}}},[e._v("\n        Cancel\n    ")]),e.loading?n("div",{staticClass:"spinner"}):e._e()])},Ae=[],Ne={props:["loading"],methods:{save:function(){this.$emit("beforeSave");var e=this;this.stripe.createSource(this.card).then(function(t){if(t.error){var n=document.getElementById("card-errors");n.textContent=t.error.message,e.$emit("error",t.error)}else e.$emit("save",e.card,t.source)})},cancel:function(){this.card.clear();var e=document.getElementById("card-errors");e.textContent="",this.$emit("cancel")}},mounted:function(){this.stripe=Stripe(window.stripePublicKey),this.elements=this.stripe.elements({locale:"en"}),this.card=this.elements.create("card",{hidePostalCode:!0});var e=document.createElement("div");this.card.mount(e),this.$refs.cardElement.appendChild(e)}},Ee=Ne,Ue=Object(pe["a"])(Ee,Te,Ae,!1,null,null,null);Ue.options.__file="CardForm.vue";var Me=Ue.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.cardType?n("div",{staticClass:"card-icon"},[n("img",{attrs:{src:"/craftnetresources/id/dist/images/cards/"+e.cardType+".svg",height:"20"}})]):e._e()},Re=[],Fe={props:["brand"],computed:{cardType:function(){switch(this.brand){case"Visa":return"visa";case"American Express":return"amex";case"MasterCard":return"mastercard";case"Discover":return"discover";case"JCB":return"jcb";case"Diners Club":return"diners"}}}},Be=Fe,Ve=Object(pe["a"])(Be,je,Re,!1,null,null,null);Ve.options.__file="CardIcon.vue";var He=Ve.exports,Ke={components:{CardForm:Me,CardIcon:He},data:function(){return{editing:!1,cardFormloading:!1,removeCardLoading:!1}},computed:Object(ee["a"])({},Object(i["d"])({card:function(e){return e.account.card}})),methods:{saveCard:function(e,t){var n=this;this.$store.dispatch("account/saveCard",t).then(function(t){e.clear(),n.cardFormloading=!1,n.editing=!1,n.$root.displayNotice("Card saved.")})},removeCard:function(){var e=this;this.removeCardLoading=!0,this.$store.dispatch("account/removeCard").then(function(t){e.removeCardLoading=!1,e.$root.displayNotice("Card removed.")})},beforeSave:function(){this.cardFormloading=!0},cancel:function(){this.editing=!1},error:function(){this.cardFormloading=!1}}},Xe=Ke,Ge=Object(pe["a"])(Xe,Se,Oe,!1,null,null,null);Ge.options.__file="BillingPayment.vue";var We=Ge.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex-1"},[n("h4",[e._v("Invoice details")]),e.showForm?e._e():n("dl",[n("dt",[e._v("VAT ID")]),n("dd",[e.billingAddress&&e.billingAddress.businessTaxId?[e._v("\n                        "+e._s(e.billingAddress.businessTaxId)+"\n                    ")]:[n("span",{staticClass:"text-secondary"},[e._v("VAT ID not defined.")])]],2)])]),e.showForm?e._e():n("div",[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-facebox":"#billing-contact-info-modal"},on:{click:function(t){e.editInvoiceDetails()}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                Edit\n            ")],1)])]),e.showForm?n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("text-field",{attrs:{id:"businessTaxId",label:"Tax ID",errors:e.errors.businessTaxId},model:{value:e.invoiceDetailsDraft.businessTaxId,callback:function(t){e.$set(e.invoiceDetailsDraft,"businessTaxId",t)},expression:"invoiceDetailsDraft.businessTaxId"}}),n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save"}}),n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Cancel"},on:{click:function(t){e.cancel()}}})],1):e._e()])},qe=[],Je=(n("f751"),{components:Object(ee["a"])({},Le["a"]),data:function(){return{errors:{},showForm:!1,invoiceDetailsDraft:{}}},computed:Object(ee["a"])({},Object(i["d"])({currentUser:function(e){return e.account.currentUser},billingAddress:function(e){return e.account.billingAddress}})),methods:{editInvoiceDetails:function(){this.showForm=!0,this.billingAddress&&(this.invoiceDetailsDraft=JSON.parse(JSON.stringify(this.billingAddress)))},save:function(){var e=this,t={businessTaxId:this.invoiceDetailsDraft.businessTaxId};this.billingAddress&&(t=Object.assign({},t,{id:this.billingAddress.id,firstName:this.billingAddress.firstName,lastName:this.billingAddress.lastName,businessName:this.billingAddress.businessName,address1:this.billingAddress.address1,address2:this.billingAddress.address2,city:this.billingAddress.city,state:this.billingAddress.state,zipCode:this.billingAddress.zipCode,country:this.billingAddress.country})),this.$store.dispatch("account/saveBillingInfo",t).then(function(t){if(t.data.error){var n=t.data.error;e.$root.displayError(n)}else e.$root.displayNotice("Invoice details saved."),e.showForm=!1,e.errors={}}).catch(function(t){var n=t.data&&t.data.error?t.data.error:"Couldn’t save invoice details.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})},cancel:function(){this.showForm=!1,this.errors={}}}}),Ye=Je,Qe=Object(pe["a"])(Ye,ze,qe,!1,null,null,null);Qe.options.__file="BillingInvoiceDetails.vue";var Ze=Qe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex-1"},[n("h4",[e._v("Billing Address")]),!e.showForm&&e.billingAddress?[e.billingAddress.firstName||e.billingAddress.lastName||e.billingAddress.address1||e.billingAddress.address2||e.billingAddress.city||e.billingAddress.country||e.billingAddress.businessName||e.billingAddress.state||e.billingAddress.zipCode?n("ul",{staticClass:"list-reset"},[e.billingAddress.firstName||e.billingAddress.lastName?n("li",[e._v(e._s(e.billingAddress.firstName)+" "+e._s(e.billingAddress.lastName))]):e._e(),e.billingAddress.businessName?n("li",[e._v(e._s(e.billingAddress.businessName))]):e._e(),e.billingAddress.address1?n("li",[e._v(e._s(e.billingAddress.address1))]):e._e(),e.billingAddress.address2?n("li",[e._v(e._s(e.billingAddress.address2))]):e._e(),e.billingAddress.zipCode||e.billingAddress.city?n("li",[e.billingAddress.zipCode?[e._v(e._s(e.billingAddress.zipCode))]:e._e(),e.billingAddress.city?[e._v(e._s(e.billingAddress.city))]:e._e()],2):e._e(),e.billingAddress.countryText?n("li",[e._v(e._s(e.billingAddress.countryText))]):e._e(),e.billingAddress.state?n("li",[e._v(e._s(e.billingAddress.state))]):e._e()]):n("p",{staticClass:"text-secondary"},[e._v("Billing address not defined.")])]:e._e()],2),e.showForm?e._e():n("div",[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-facebox":"#billing-contact-info-modal"},on:{click:function(t){e.edit()}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                Edit\n            ")],1)])]),e.showForm?n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("text-field",{attrs:{id:"firstName",label:"First Name",errors:e.errors.firstName},model:{value:e.invoiceDetailsDraft.firstName,callback:function(t){e.$set(e.invoiceDetailsDraft,"firstName",t)},expression:"invoiceDetailsDraft.firstName"}}),n("text-field",{attrs:{id:"lastName",label:"Last Name",errors:e.errors.lastName},model:{value:e.invoiceDetailsDraft.lastName,callback:function(t){e.$set(e.invoiceDetailsDraft,"lastName",t)},expression:"invoiceDetailsDraft.lastName"}}),n("text-field",{attrs:{id:"businessName",label:"Business Name",errors:e.errors.businessName},model:{value:e.invoiceDetailsDraft.businessName,callback:function(t){e.$set(e.invoiceDetailsDraft,"businessName",t)},expression:"invoiceDetailsDraft.businessName"}}),n("text-field",{attrs:{id:"address1",label:"Address Line 1",errors:e.errors.address1},model:{value:e.invoiceDetailsDraft.address1,callback:function(t){e.$set(e.invoiceDetailsDraft,"address1",t)},expression:"invoiceDetailsDraft.address1"}}),n("text-field",{attrs:{id:"address2",label:"Address Line 2",errors:e.errors.address2},model:{value:e.invoiceDetailsDraft.address2,callback:function(t){e.$set(e.invoiceDetailsDraft,"address2",t)},expression:"invoiceDetailsDraft.address2"}}),n("text-field",{attrs:{id:"city",label:"City",errors:e.errors.city},model:{value:e.invoiceDetailsDraft.city,callback:function(t){e.$set(e.invoiceDetailsDraft,"city",t)},expression:"invoiceDetailsDraft.city"}}),n("select-field",{attrs:{id:"country",label:"Country",options:e.countryOptions},on:{input:e.onCountryChange},model:{value:e.invoiceDetailsDraft.country,callback:function(t){e.$set(e.invoiceDetailsDraft,"country",t)},expression:"invoiceDetailsDraft.country"}}),n("select-field",{attrs:{id:"state",label:"State",options:e.stateOptions},model:{value:e.invoiceDetailsDraft.state,callback:function(t){e.$set(e.invoiceDetailsDraft,"state",t)},expression:"invoiceDetailsDraft.state"}}),n("text-field",{attrs:{id:"zipCode",label:"Zip Code",errors:e.errors.zipCode},model:{value:e.invoiceDetailsDraft.zipCode,callback:function(t){e.$set(e.invoiceDetailsDraft,"zipCode",t)},expression:"invoiceDetailsDraft.zipCode"}}),n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save"}}),n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Cancel"},on:{click:function(t){e.cancel()}}})],1):e._e()])},tt=[],nt={components:Object(ee["a"])({},Le["a"]),data:function(){return{errors:{},showForm:!1,invoiceDetailsDraft:{}}},computed:Object(ee["a"])({},Object(i["d"])({currentUser:function(e){return e.account.currentUser},billingAddress:function(e){return e.account.billingAddress},countries:function(e){return e.craftId.countries}}),{countryOptions:function(){var e=[];for(var t in this.countries)this.countries.hasOwnProperty(t)&&e.push({label:this.countries[t].name,value:t});return e},stateOptions:function(){var e=[],t=this.invoiceDetailsDraft.country;if(!this.countries[t]||this.countries[t]&&!this.countries[t].states)return[];var n=this.countries[t].states;for(var s in n)n.hasOwnProperty(s)&&e.push({label:n[s],value:s});return e}}),methods:{edit:function(){this.showForm=!0,this.billingAddress&&(this.invoiceDetailsDraft=JSON.parse(JSON.stringify(this.billingAddress)))},save:function(){var e=this,t={firstName:this.invoiceDetailsDraft.firstName,lastName:this.invoiceDetailsDraft.lastName,businessName:this.invoiceDetailsDraft.businessName,address1:this.invoiceDetailsDraft.address1,address2:this.invoiceDetailsDraft.address2,city:this.invoiceDetailsDraft.city,state:this.invoiceDetailsDraft.state,zipCode:this.invoiceDetailsDraft.zipCode,country:this.invoiceDetailsDraft.country};this.billingAddress&&(t=Object.assign({},t,{id:this.billingAddress.id,businessTaxId:this.billingAddress.businessTaxId})),this.$store.dispatch("account/saveBillingInfo",t).then(function(t){if(t.data.error){var n=t.data.error;e.$root.displayError(n)}else e.$root.displayNotice("Billing address saved."),e.showForm=!1,e.errors={}}).catch(function(t){var n=t.data&&t.data.error?t.data.error:"Couldn’t save billing address.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})},cancel:function(){this.showForm=!1,this.errors={}},onCountryChange:function(){this.invoiceDetailsDraft.state=null,this.stateOptions.length&&(this.invoiceDetailsDraft.state=this.stateOptions[0].value)}}},st=nt,it=Object(pe["a"])(st,et,tt,!1,null,null,null);it.options.__file="BillingAddressForm.vue";var at=it.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"responsive-content"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[e._v("ID")]),n("th",[e._v("Price")]),n("th",[e._v("Date")]),e.upcoming?e._e():n("th",[e._v("Receipt")])])]),n("tbody",e._l(e.invoices,function(t){return n("tr",[e.upcoming?n("td",[e._v("—")]):n("td",[n("router-link",{attrs:{to:"/account/billing/invoices/"+t.number}},[e._v(e._s(t.shortNumber))])],1),n("td",[e._v(e._s(e._f("currency")(t.totalPrice)))]),n("td",[t.datePaid?[e._v(e._s(e._f("moment")(t.datePaid.date,"L")))]:e._e()],2),e.upcoming?e._e():n("td",[n("a",{attrs:{href:t.pdfUrl}},[e._v("Download Receipt")])])])}))])])},ot=[],ct={props:["upcoming","invoices"]},lt=ct,dt=Object(pe["a"])(lt,rt,ot,!1,null,null,null);dt.options.__file="InvoicesTable.vue";var ut=dt.exports,pt={components:{BillingPayment:We,BillingInvoiceDetails:Ze,BillingAddressForm:at,InvoicesTable:ut},computed:Object(ee["a"])({},Object(i["d"])({invoices:function(e){return e.account.invoices},upcomingInvoice:function(e){return e.account.upcomingInvoice}}))},ft=pt,ht=Object(pe["a"])(ft,$e,Ie,!1,null,null,null);ht.options.__file="Billing.vue";var mt=ht.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$root.invoicesLoading?n("div",{staticClass:"spinner"}):[n("p",[n("router-link",{staticClass:"nav-link",attrs:{to:"/account/billing",exact:""}},[e._v("← Billing")])],1),n("h1",[e._v("Invoice "+e._s(e.invoice.shortNumber))]),n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[n("dl",[n("dt",[e._v("Invoice Number")]),n("dd",[e._v(e._s(e.invoice.number))]),n("dt",[e._v("Date Paid")]),n("dd",[e._v(e._s(e._f("moment")(e.invoice.datePaid.date,"LLL")))])]),n("billing-address",{staticClass:"mb-4",attrs:{address:e.invoice.billingAddress}}),n("table",{staticClass:"table"},[e._m(0),n("tbody",[e._l(e.invoice.lineItems,function(t){return n("tr",[n("td",[e._v(e._s(t.description))]),n("td",[e._v(e._s(e._f("currency")(t.salePrice)))]),n("td",[e._v(e._s(t.qty))]),n("td",{staticClass:"text-right"},[e._v(e._s(e._f("currency")(t.subtotal)))])])}),e._l(e.invoice.adjustments,function(t){return n("tr",[n("th",{staticClass:"text-right",attrs:{colspan:"3"}},[e._v(e._s(t.name))]),n("td",{staticClass:"text-right"},[e._v(e._s(e._f("currency")(t.amount)))])])}),n("tr",[n("th",{staticClass:"text-right",attrs:{colspan:"3"}},[e._v("Items Price")]),n("td",{staticClass:"text-right"},[e._v(e._s(e._f("currency")(e.invoice.itemTotal)))])]),n("tr",[n("th",{staticClass:"text-right",attrs:{colspan:"3"}},[e._v("Total Price")]),n("td",{staticClass:"text-right"},[e._v(e._s(e._f("currency")(e.invoice.totalPrice)))])])],2)])],1)]),n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"mb-2"},[e._v("Transactions")]),n("table",{staticClass:"table"},[e._m(1),n("tbody",e._l(e.invoice.transactions,function(t){return n("tr",[n("td",[e._v(e._s(t.type))]),n("td",[e._v(e._s(t.status))]),n("td",[e._v(e._s(e._f("currency")(t.amount)))]),n("td",[e._v(e._s(e._f("currency")(t.paymentAmount)))]),n("td",[e._v(e._s(t.gatewayName))]),n("td",[e._v(e._s(e._f("moment")(t.dateCreated.date,"LLL")))])])}))])])]),e.invoice.cmsLicenses.length?n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"mb-2"},[e._v("CMS Licenses")]),n("cms-licenses-table",{attrs:{licenses:e.invoice.cmsLicenses}})],1)]):e._e(),e.invoice.pluginLicenses.length?n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"mb-2"},[e._v("Plugin Licenses")]),n("plugin-licenses-table",{attrs:{licenses:e.invoice.pluginLicenses}})],1)]):e._e()]],2)},gt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Item")]),n("th",[e._v("Price")]),n("th",[e._v("Quantity")]),n("th")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Type")]),n("th",[e._v("Status")]),n("th",[e._v("Amount")]),n("th",[e._v("Payment Amount")]),n("th",[e._v("Method")]),n("th",[e._v("Date")])])])}],bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.address?n("ul",{staticClass:"address-data list-reset"},[e.address.firstName||e.address.lastName?n("li",[n("strong",[e.address.attention?[e._v("Att: "+e._s(e.address.attention)),n("br")]:e._e(),e.address.title?[e._v(e._s(e.address.title))]:e._e(),e.address.firstName?[e._v(e._s(e.address.firstName))]:e._e(),e.address.lastName?[e._v(e._s(e.address.lastName))]:e._e()],2)]):e._e(),e.address.businessName||e.address.businessTaxId?n("li",[n("strong",[e.address.businessName?[e._v(e._s(e.address.businessName))]:e._e(),e.address.businessTaxId?[e._v("- "+e._s(e.address.businessTaxId))]:e._e()],2)]):e._e(),e.address.address1?n("li",[e._v(e._s(e.address.address1))]):e._e(),e.address.address2?n("li",[e._v(e._s(e.address.address2))]):e._e(),e.address.zipCode||e.address.city?n("li",[e.address.zipCode?[e._v(e._s(e.address.zipCode))]:e._e(),e.address.city?[e._v(e._s(e.address.city))]:e._e()],2):e._e(),e.address.countryText?n("li",[e._v(e._s(e.address.countryText))]):e._e(),e.address.stateText?n("li",[e._v(e._s(e.address.stateText))]):e._e(),e.address.phone?n("li",[e._v(e._s(e.address.phone))]):e._e(),e.address.alternativePhone?n("li",[e._v(e._s(e.address.alternativePhone))]):e._e()]):e._e()])},_t=[],Ct={props:["address"]},yt=Ct,wt=Object(pe["a"])(yt,bt,_t,!1,null,null,null);wt.options.__file="BillingAddress.vue";var Lt=wt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"responsive-content"},[n("table",{staticClass:"table"},[e._m(0),n("tbody",[e._l(e.licenses,function(t){return n("tr",[n("td",[n("code",[t.key?n("router-link",{attrs:{to:"/account/licenses/cms/"+t.id}},[e._v("\n                            "+e._s(t.key.substr(0,10))+"\n                        ")]):[e._v("\n                            "+e._s(t.shortKey)+"\n                        ")]],2)]),n("td",[e._v(e._s(e._f("capitalize")(t.edition)))]),n("td",[e._v(e._s(t.domain))]),n("td",[e._v(e._s(t.notes))]),n("td",[t.expirable&&t.expiresOn?[t.expired?[n("span",{staticClass:"text-grey-dark"},[e._v("Expired")])]:[e.expiresSoon(t)?[n("span",{staticClass:"text-orange"},[e._v(e._s(e._f("moment")(t.expiresOn.date,"L")))])]:[e._v("\n                                "+e._s(e._f("moment")(t.expiresOn.date,"L"))+"\n                            ")]]]:[e._v("\n                        Forever\n                    ")]],2),n("td",[t.expirable&&t.expiresOn?[1==t.autoRenew?n("span",{staticClass:"badge badge-success"},[e._v("Enabled")]):n("span",{staticClass:"badge"},[e._v("Disabled")])]:e._e()],2)])})],2)])])},xt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("License Key")]),n("th",[e._v("Edition")]),n("th",[e._v("Domain")]),n("th",[e._v("Notes")]),n("th",[e._v("Updates Until")]),n("th",[e._v("Auto Renew")])])])}],Dt={props:["licenses"],computed:Object(ee["a"])({},Object(i["c"])({expiresSoon:"licenses/expiresSoon"}))},Pt=Dt,$t=Object(pe["a"])(Pt,kt,xt,!1,null,null,null);$t.options.__file="CmsLicensesTable.vue";var It=$t.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"responsive-content"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[e._v("License Key")]),n("th",[e._v("Plugin")]),e.excludeNotesColumn?e._e():n("th",[e._v("Notes")]),e.excludeCmsLicenseColumn?e._e():n("th",[e._v("CMS License")]),n("th",[e._v("Updates Until")]),n("th",[e._v("Auto Renew")])])]),n("tbody",[e._l(e.licenses,function(t){return n("tr",[n("td",[n("code",[t.key?n("router-link",{attrs:{to:"/account/licenses/plugins/"+t.id}},[e._v(e._s(t.key.substr(0,4)))]):[e._v(e._s(t.shortKey))]],2)]),n("td",[t.plugin?[e._v("\n                        "+e._s(t.plugin.name)+"\n                    ")]:e._e()],2),e.excludeNotesColumn?e._e():n("td",[e._v(e._s(t.notes))]),e.excludeCmsLicenseColumn?e._e():n("td",[t.cmsLicense?[n("code",[t.cmsLicense.key?n("router-link",{attrs:{to:"/account/licenses/cms/"+t.cmsLicenseId}},[e._v(e._s(t.cmsLicense.key.substr(0,10)))]):[e._v(e._s(t.cmsLicense.shortKey))]],2)]:[e._v("\n                        —\n                    ")]],2),n("td",[t.expiresOn?[e.expiresSoon(t)?[n("span",{staticClass:"text-orange"},[e._v("\n                                "+e._s(e._f("moment")(t.expiresOn.date,"L"))+"\n                            ")])]:[e._v("\n                            "+e._s(e._f("moment")(t.expiresOn.date,"L"))+"\n                        ")]]:e._e()],2),n("td",[e.autoRenewSwitch?[t.key?[n("lightswitch-field",{attrs:{id:"auto-renew-"+t.id,checked:e.pluginLicensesAutoRenew[t.id],disabled:!t.key},on:{change:function(n){e.savePluginLicenseAutoRenew(t,n)},"update:checked":function(n){e.$set(e.pluginLicensesAutoRenew,t.id,n)}}})]:[n("lightswitch-field",{attrs:{id:"auto-renew-"+t.id,checked:t.autoRenew,disabled:!0}})]]:[1==t.autoRenew?n("span",{staticClass:"badge badge-success"},[e._v("Enabled")]):n("span",{staticClass:"badge"},[e._v("Disabled")])]],2)])})],2)])])},Ot=[],Tt={data:function(){return{pluginLicensesAutoRenew:{}}},props:["licenses","excludeCmsLicenseColumn","excludeNotesColumn","autoRenewSwitch"],components:Object(ee["a"])({},Le["a"]),computed:Object(ee["a"])({},Object(i["c"])({expiresSoon:"licenses/expiresSoon"})),methods:{savePluginLicenseAutoRenew:function(e,t){var n=this;if(!e.key)return!1;var s=t.target.checked,i={pluginHandle:e.plugin.handle,key:e.key,autoRenew:s?1:0};this.$store.dispatch("licenses/savePluginLicense",i).then(function(e){s?n.$root.displayNotice("Auto renew enabled."):n.$root.displayNotice("Auto renew disabled."),n.$store.dispatch("licenses/getCmsLicenses")}).catch(function(e){n.$root.displayError("Couldn’t save license."),n.errors=e.errors})}},mounted:function(){this.pluginLicensesAutoRenew={},this.licenses.forEach(function(e){this.pluginLicensesAutoRenew[e.id]=e.autoRenew}.bind(this))}},At=Tt,Nt=Object(pe["a"])(At,St,Ot,!1,null,null,null);Nt.options.__file="PluginLicensesTable.vue";var Et=Nt.exports,Ut={components:{BillingAddress:Lt,CardIcon:He,CmsLicensesTable:It,PluginLicensesTable:Et},computed:Object(ee["a"])({},Object(i["c"])({getInvoiceByNumber:"account/getInvoiceByNumber"}),{invoice:function(){var e=this.getInvoiceByNumber(this.$route.params.number);return e||(this.$root.displayError("Couldn’t find invoice."),this.$router.push({path:"/account/billing"})),e}})},Mt=Ut,jt=Object(pe["a"])(Mt,vt,gt,!1,null,null,null);jt.options.__file="BillingInvoiceDetails.vue";var Rt=jt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Claim license")]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h3",[e._v("Claim a Craft CMS license")]),n("p",{staticClass:"text-secondary"},[e._v("Attach a Craft CMS license to your Craft ID account.")]),n("form",{staticClass:"mb-6",on:{submit:function(t){t.preventDefault(),e.claimCmsLicense()}}},[n("textarea-field",{staticClass:"mono",attrs:{id:"cmsLicenseKey",spellcheck:"false",label:"Craft CMS License Key",rows:"5"},on:{input:e.cmsLicenseKeyChange},model:{value:e.cmsLicenseKey,callback:function(t){e.cmsLicenseKey=t},expression:"cmsLicenseKey"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.cmsLicenseValidates},attrs:{type:"submit",value:"Claim License",disabled:!e.cmsLicenseValidates}}),e.cmsLicenseLoading?n("div",{staticClass:"spinner"}):e._e()],1),n("form",{on:{submit:function(t){t.preventDefault(),e.claimCmsLicenseFile()}}},[n("div",{staticClass:"form-group mb-4"},[n("label",{staticClass:"block",attrs:{for:"licenseFile"}},[e._v("Or upload your license.key file")]),n("input",{ref:"licenseFile",staticClass:"form-control",attrs:{type:"file",id:"licenseFile",name:"licenseFile"},on:{change:e.cmsLicenseFileChange}})]),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.cmsLicenseFileValidates},attrs:{type:"submit",value:"Claim License",disabled:!e.cmsLicenseFileValidates}}),e.cmsLicenseFileLoading?n("div",{staticClass:"spinner"}):e._e()])])]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h3",[e._v("Claim a plugin license")]),n("p",{staticClass:"text-secondary"},[e._v("Attach a plugin license to your Craft ID account.")]),n("form",{on:{submit:function(t){t.preventDefault(),e.claimPluginLicense()}}},[n("text-field",{staticClass:"mono",attrs:{id:"pluginLicenseKey",spellcheck:"false",label:"Plugin License Key",placeholder:"XXXX-XXXX-XXXX-XXXX-XXXX-XXXX",mask:{mask:"****-****-****-****-****-****",placeholder:" ",showMaskOnHover:!1,showMaskOnFocus:!1}},model:{value:e.pluginLicenseKey,callback:function(t){e.pluginLicenseKey=t},expression:"pluginLicenseKey"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.pluginLicenseValidates},attrs:{type:"submit",value:"Claim License",disabled:!e.pluginLicenseValidates}}),e.pluginLicenseLoading?n("div",{staticClass:"spinner"}):e._e()],1)])]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h3",[e._v("Claim licenses by your email address")]),n("p",{staticClass:"text-secondary"},[e._v("Use an email address to attach Craft CMS and plugin licenses to your Craft ID account.")]),n("form",{on:{submit:function(t){t.preventDefault(),e.claimLicensesByEmail()}}},[n("text-field",{attrs:{id:"email",label:"Email Address",placeholder:"user@example.com"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:e.$v.email.$invalid},attrs:{type:"submit",value:"Claim Licenses",disabled:e.$v.email.$invalid}}),e.emailLoading?n("div",{staticClass:"spinner"}):e._e()],1)])])])},Bt=[],Vt=n("b5ae"),Ht={data:function(){return{cmsLicenseKey:"",cmsLicenseLoading:!1,cmsLicenseValidates:!1,cmsLicenseFile:"",cmsLicenseFileLoading:!1,cmsLicenseFileValidates:!1,pluginLicenseKey:"",pluginLicenseLoading:!1,pluginLicenseValidates:!1,email:"",emailLoading:!1}},validations:{email:{required:Vt["required"],email:Vt["email"]}},components:Object(ee["a"])({},Le["a"]),methods:{checkCmsLicense:function(){return 258===this.cmsLicenseKey.length},checkPluginLicense:function(){var e=this.pluginLicenseKey.replace(/(\-\ )/gm,"").trim();return 29===e.length},claimCmsLicense:function(){var e=this;this.cmsLicenseLoading=!0,this.$store.dispatch("licenses/claimCmsLicense",this.cmsLicenseKey).then(function(t){e.cmsLicenseLoading=!1,e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("CMS license claimed."),e.$router.push({path:"/account/licenses/cms"})}).catch(function(t){e.cmsLicenseLoading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t claim CMS license.";e.$root.displayError(n)})},claimCmsLicenseFile:function(){var e=this;this.$store.dispatch("licenses/claimCmsLicenseFile",this.$refs.licenseFile.files[0]).then(function(t){e.cmsLicenseFileLoading=!1,e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("CMS license claimed."),e.$router.push({path:"/account/licenses/cms"})}).catch(function(t){e.cmsLicenseFileLoading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t claim CMS license.";e.$root.displayError(n)})},claimLicensesByEmail:function(){var e=this;this.emailLoading=!0,this.$store.dispatch("licenses/claimLicensesByEmail",this.email).then(function(t){e.emailLoading=!1,e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("Verification email sent to "+e.email+".")}).catch(function(t){e.emailLoading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t claim licenses.";e.$root.displayError(n)})},claimPluginLicense:function(){var e=this;this.pluginLicenseLoading=!0,this.$store.dispatch("licenses/claimPluginLicense",this.pluginLicenseKey).then(function(t){e.pluginLicenseLoading=!1,e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("Plugin license claimed."),e.$router.push({path:"/account/licenses/plugins"})}).catch(function(t){e.pluginLicenseLoading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t claim plugin license.";e.$root.displayError(n)})},cmsLicenseKeyChange:function(e){var t=this;this.$nextTick(function(){t.cmsLicenseKey=t.$options.filters.formatCmsLicense(e)})},cmsLicenseFileChange:function(){this.cmsLicenseFileValidates=this.$refs.licenseFile.files.length>0}},watch:{cmsLicenseKey:function(e){this.cmsLicenseValidates=this.checkCmsLicense()},pluginLicenseKey:function(e){this.pluginLicenseValidates=this.checkPluginLicense()}}},Kt=Ht,Xt=Object(pe["a"])(Kt,Ft,Bt,!1,null,null,null);Xt.options.__file="LicensesClaim.vue";var Gt=Xt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("license-renew-alert",{attrs:{type:"CMS","expiring-licenses":e.expiringCmsLicenses}}),n("h1",[e._v("Craft CMS")]),e.cmsLicenses.length>0?n("div",{staticClass:"card card-table responsive-content"},[n("cms-licenses-table",{attrs:{type:"craft",licenses:e.cmsLicenses}})],1):n("div",{staticClass:"empty"},[n("div",{staticClass:"empty-body"},[n("font-awesome-icon",{staticClass:"text-5xl mb-4 text-grey-light",attrs:{icon:"key"}}),n("div",{staticClass:"font-bold"},[e._v("No Craft CMS licenses")]),n("div",[e._v("You don’t have any Craft CMS licenses yet.")])],1)])],1)},zt=[],qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.expiringLicenses.length>0?n("div",{staticClass:"top-alert alert alert-info",attrs:{role:"alert"}},[1===e.expiringLicenses.length?[e._v("\n        "+e._s(e.expiringLicenses.length)+" "+e._s(e.type)+" license will lose its access to updates soon. Renew it now to keep getting updates.\n    ")]:[e._v("\n        "+e._s(e.expiringLicenses.length)+" "+e._s(e.type)+" licenses will lose their access to updates soon. Renew them now to keep getting updates.\n    ")]],2):e._e()},Jt=[],Yt={props:["expiringLicenses","type"]},Qt=Yt,Zt=Object(pe["a"])(Qt,qt,Jt,!1,null,null,null);Zt.options.__file="LicenseRenewAlert.vue";var en=Zt.exports,tn={components:{CmsLicensesTable:It,LicenseRenewAlert:en},computed:Object(ee["a"])({},Object(i["d"])({cmsLicenses:function(e){return e.licenses.cmsLicenses}}),Object(i["c"])({expiringCmsLicenses:"licenses/expiringCmsLicenses"}))},nn=tn,sn=Object(pe["a"])(nn,Wt,zt,!1,null,null,null);sn.options.__file="LicensesCms.vue";var an=sn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.license?n("div",[n("p",[n("router-link",{staticClass:"nav-link",attrs:{to:"/account/licenses/cms",exact:""}},[e._v("← Craft CMS")])],1),n("h1",[n("code",[e._v(e._s(e.license.key.substr(0,10)))])]),n("cms-license-details",{attrs:{license:e.license}}),n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Plugin Licenses")]),e.license.pluginLicenses.length>0?[n("p",{staticClass:"text-secondary mb-4"},[e._v("Plugin licenses attached to this Craft CMS license.")]),n("plugin-licenses-table",{attrs:{licenses:e.license.pluginLicenses,"exclude-cms-license-column":!0,"exclude-notes-column":!0,"auto-renew-switch":!0}})]:[n("p",{staticClass:"text-secondary mb-4"},[e._v("No plugin licenses are attached to this Craft CMS license.")])]],2)]),n("license-history",{attrs:{history:e.license.history}}),n("div",{staticClass:"card card-danger mb-3"},[n("div",{staticClass:"card-header"},[e._v("Danger Zone")]),n("div",{staticClass:"card-body"},[n("h5",[e._v("Release license")]),n("p",[e._v("Release this license if you no longer wish to use it, so that it can be claimed by someone else.")]),n("div",[n("button",{staticClass:"btn btn-danger",on:{click:function(t){e.releaseCmsLicense()}}},[e._v("Release License")])])])])],1):e._e()},on=[],cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"mb-4"},[e._v("License Details")]),e.license?[n("div",{staticClass:"md:flex -mx-4"},[n("div",{staticClass:"md:w-1/2 px-4"},[n("dl",[n("dt",[e._v("Edition")]),n("dd",[e._v(e._s(e._f("capitalize")(e.license.edition)))]),n("dt",[e._v("License Key")]),n("dd",[n("code",[e._v(e._s(e.license.key.slice(0,10))+"…")]),n("a",{staticClass:"ml-2",attrs:{href:"#copy"},on:{click:e.copyLicense}},[e._v("Copy")]),n("a",{staticClass:"ml-2",attrs:{href:e.downloadLicenseUrl,target:"_blank"}},[e._v("Download")])]),n("dt",[e._v("Domain Name")]),n("dd",[e.domainEditing?e._e():[n("p",[e._v(e._s(e.license.domain))]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(t){e.domainEditing=!0}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                                            Change Domain\n                                        ")],1)])],e.domainEditing?n("form",{on:{submit:function(t){t.preventDefault(),e.saveDomain()}}},[n("text-field",{attrs:{id:"domain"},on:{input:e.domainChange},model:{value:e.licenseDraft.domain,callback:function(t){e.$set(e.licenseDraft,"domain",t)},expression:"licenseDraft.domain"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.domainValidates},attrs:{type:"submit",value:"Save",disabled:!e.domainValidates}}),n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Cancel"},on:{click:function(t){e.cancelEditDomain()}}}),e.domainLoading?n("div",{staticClass:"spinner"}):e._e()],1):e._e()],2)])]),n("div",{staticClass:"md:w-1/2 px-4"},[n("dl",[n("dt",[e._v("Email")]),n("dd",[e._v(e._s(e.license.email))]),n("dt",[e._v("Created")]),n("dd",[e._v(e._s(e._f("moment")(e.license.dateCreated.date,"L")))]),n("dt",[e._v("Notes")]),n("dd",[e.notesEditing?e._e():[n("p",[e._v(e._s(e.license.notes))]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(t){e.notesEditing=!0}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                                            Edit\n                                        ")],1)])],e.notesEditing?n("form",{on:{submit:function(t){t.preventDefault(),e.saveNotes()}}},[n("textarea-field",{attrs:{id:"notes"},on:{input:e.notesChange},model:{value:e.licenseDraft.notes,callback:function(t){e.$set(e.licenseDraft,"notes",t)},expression:"licenseDraft.notes"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.notesValidates},attrs:{type:"submit",value:"Save",disabled:!e.notesValidates}}),n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Cancel"},on:{click:function(t){e.cancelEditNotes()}}}),e.notesLoading?n("div",{staticClass:"spinner"}):e._e()],1):e._e()],2)])])])]:e._e()],2)]),e.license.expirable&&e.license.expiresOn?n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Auto-Renew")]),e.licenseDraft.autoRenew?[e._m(0)]:[e._m(1)],n("lightswitch-field",{attrs:{id:"auto-renew",checked:e.licenseDraft.autoRenew},on:{change:e.saveAutoRenew,"update:checked":function(t){e.$set(e.licenseDraft,"autoRenew",t)}}})],2)]):e._e(),n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Updates")]),n("license-update-message",{attrs:{license:e.license}}),n("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.$root.showRenewLicensesModal=!0}}},[e._v("Renew your license…")])],1)])])},ln=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Auto-renew is "),n("strong",[e._v("enabled")]),e._v(" for this license.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Auto-renew is "),n("strong",[e._v("disabled")]),e._v(" for this license.")])}],dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.license&&e.license.expirable&&e.license.expiresOn?[e.license.expired?[n("p",[e._v("This license has expired and doesn’t have access to updates anymore.")])]:[e.expiresSoon(e.license)?[e.license.autoRenew?[n("p",[e._v("This license will auto-renew in "),n("span",{staticClass:"text-green"},[e._v(e._s(e.daysBeforeExpiry(e.license))+" days")]),e._v(".")])]:[n("p",[e._v("This license will lose access to updates in "),n("span",{staticClass:"text-orange"},[e._v(e._s(e.daysBeforeExpiry(e.license))+" days")]),e._v(".")])]]:[e.license.autoRenew?[n("p",[e._v("This license will auto-renew on "),n("strong",[e._v(e._s(e._f("moment")(e.license.expiresOn.date,"L")))]),e._v(".")])]:[n("p",[e._v("This license will continue having access to updates until "),n("strong",[e._v(e._s(e._f("moment")(e.license.expiresOn.date,"L")))]),e._v(".")])]]]]:[n("p",[e._v("This license will always have access to updates.")])]],2)},un=[],pn={props:["license"],computed:Object(ee["a"])({},Object(i["c"])({expiresSoon:"licenses/expiresSoon",daysBeforeExpiry:"licenses/daysBeforeExpiry"}))},fn=pn,hn=Object(pe["a"])(fn,dn,un,!1,null,null,null);hn.options.__file="LicenseUpdateMessage.vue";var mn=hn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.license.expirable&&e.license.expiresOn?n("div",[n("h2",{staticClass:"mb-3"},[e._v("Renew Licenses")]),"extend-updates"===e.step?n("extend-updates",{attrs:{license:e.license,renew:e.renew},on:{"update:renew":function(t){e.renew=t},cancel:function(t){e.$emit("cancel")},continue:function(t){e.step="plugins"}}}):e._e(),"plugins"===e.step?n("plugins",{attrs:{checkedLicenses:e.checkedLicenses,license:e.license,renew:e.renew},on:{"update:checkedLicenses":function(t){e.checkedLicenses=t},back:function(t){e.step="extend-updates"},addToCart:function(t){e.$emit("cancel")}}}):e._e()],1):e._e()},gn=[],bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Do you want to renew plugin licenses as well?")]),n("table",{staticClass:"table mb-2"},[n("thead",[n("tr",[n("td",[n("input",{ref:"checkAll",attrs:{type:"checkbox"},on:{change:e.checkAll}})]),n("th",[e._v("Item")]),n("th",[e._v("Renewal Date")]),n("th",[e._v("New Renewal Date")]),n("th",[e._v("Renewal Price")]),n("th",[e._v("Subtotal")])])]),n("tbody",[e._l(e.renewableLicenses(e.license,e.renew),function(t,s){return n("tr",[n("td",[n("input",{attrs:{type:"checkbox",disabled:0===s},domProps:{value:1,checked:e.checkedLicenses[s]},on:{input:function(t){e.checkLicense(t,s)}}})]),n("td",[e._v(e._s(t.description))]),n("td",[e._v(e._s(e._f("moment")(t.expiresOn.date,"L")))]),n("td",[e._v(e._s(e._f("moment")(e.newExpiresOn(e.license,e.renew),"L"))+" "),n("small",{staticClass:"text-grey-dark"},[e._v("(+"+e._s(Math.round(e.newExpiresOn(e.license,e.renew).diff(t.expiresOn.date,"days",!0)))+" days)")])]),n("td",[e._v(e._s(e._f("currency")(t.edition.renewalPrice))+"/year")]),n("td",[e._v(e._s(e._f("currency")(e.newExpiresOn(e.license,e.renew).diff(t.expiresOn.date,"years",!0)*t.edition.renewalPrice)))])])}),n("tr",[n("th"),n("th",{staticClass:"text-right",attrs:{colspan:"4"}},[e._v("Total")]),n("th",[e._v(e._s(e._f("currency")(e.renewableLicensesTotal(e.license,e.renew,e.checkedLicenses))))])])],2)]),n("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.$emit("back")}}},[e._v("Back")]),n("button",{staticClass:"btn btn-primary",class:{disabled:0===e.renewableLicensesTotal(e.license,e.renew,e.checkedLicenses)},attrs:{disabled:0===e.renewableLicensesTotal(e.license,e.renew,e.checkedLicenses)},on:{click:function(t){e.addToCart()}}},[e._v("Add to cart")])])},_n=[],Cn={props:["license","renew","checkedLicenses"],computed:Object(ee["a"])({},Object(i["d"])({pluginLicenses:function(e){return e.licenses.pluginLicenses}}),Object(i["c"])({renewableLicenses:"licenses/renewableLicenses",newExpiresOn:"licenses/newExpiresOn",renewableLicensesTotal:"licenses/renewableLicensesTotal"})),methods:{checkLicense:function(e,t){var n=JSON.parse(JSON.stringify(this.checkedLicenses));n[t]=e.target.checked?1:0,this.$emit("update:checkedLicenses",n)},checkAll:function(e){var t=[];e.target.checked?this.renewableLicenses(this.license,this.renew).forEach(function(e,n){t[n]=1}):t[0]=1,this.$emit("update:checkedLicenses",t)},addToCart:function(){var e=this,t={type:"renewal",lineItem:{total:this.renewableLicensesTotal(this.license,this.renew,this.checkedLicenses)}};this.$store.dispatch("cart/addToCartMock",{item:t}).then(function(t){e.$router.push({path:"/cart"})}),this.$emit("addToCart")}},mounted:function(){1!==this.renewableLicenses(this.license,this.renew).length&&0!==this.checkedLicenses.length||this.$refs.checkAll.click()}},yn=Cn,wn=Object(pe["a"])(yn,bn,_n,!1,null,null,null);wn.options.__file="Plugins.vue";var Ln=wn.exports,kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select-field",{attrs:{value:e.renew,options:e.renewOptions},on:{input:function(t){e.$emit("update:renew",t)}}}),n("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.$emit("cancel")}}},[e._v("Cancel")]),n("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$emit("continue")}}},[e._v("Continue")])],1)},xn=[],Dn={props:["license","renew"],components:Object(ee["a"])({},Le["a"]),computed:{renewOptions:function(){for(var e=[],t=this.license.editionDetails,n=(t.renewalPrice,1);n<=5;n++){var s=this.$moment(this.license.expiresOn.date).add(n,"year"),i=this.$moment(s).format("L"),a="Extend updates until "+i;e.push({label:a,value:n})}return e}}},Pn=Dn,$n=Object(pe["a"])(Pn,kn,xn,!1,null,null,null);$n.options.__file="ExtendUpdates.vue";var In=$n.exports,Sn={props:["license"],components:{Plugins:Ln,ExtendUpdates:In},data:function(){return{renew:1,checkedLicenses:[],step:"extend-updates"}},computed:Object(ee["a"])({},Object(i["c"])({renewableLicenses:"licenses/renewableLicenses"}))},On=Sn,Tn=Object(pe["a"])(On,vn,gn,!1,null,null,null);Tn.options.__file="RenewLicensesForm.vue";var An=Tn.exports,Nn={props:["license"],data:function(){return{errors:{},licenseDraft:{},domainEditing:!1,domainLoading:!1,domainValidates:!1,notesEditing:!1,notesLoading:!1,notesValidates:!1,renewLicenses:!1}},components:Object(ee["a"])({},Le["a"],{LicenseUpdateMessage:mn,RenewLicensesForm:An}),computed:{canSave:function(){return this.license.domain!=this.licenseDraft.domain||this.license.notes!=this.licenseDraft.notes},formattedLicense:function(){var e=this.license.key,t=this.$options.filters.formatCmsLicense(e);return t},downloadLicenseUrl:function(){return Craft.actionUrl+"/craftnet/id/cms-licenses/download&id="+this.license.id}},methods:{saveAutoRenew:function(){var e=this;this.$store.dispatch("licenses/saveCmsLicense",{key:this.license.key,autoRenew:this.licenseDraft.autoRenew?1:0}).then(function(t){e.licenseDraft.autoRenew?e.$root.displayNotice("Auto renew enabled."):e.$root.displayNotice("Auto renew disabled.")}).catch(function(t){e.$root.displayError("Couldn’t save license."),e.errors=t.data.errors})},saveDomain:function(){var e=this;this.domainLoading=!0;var t=this.licenseDraft.domain;this.saveCmsLicense(function(n){var s=n.data.license.domain;t&&t!==s?(e.licenseDraft.domain=s,s?e.$root.displayNotice("Domain changed to "+s+"."):e.$root.displayNotice(t+" is not a public domain.")):e.$root.displayNotice("Domain saved."),e.domainLoading=!1,e.domainEditing=!1},function(){e.domainLoading=!1})},saveNotes:function(){var e=this;this.notesLoading=!0,this.saveCmsLicense(function(){e.notesLoading=!1,e.notesEditing=!1,e.$root.displayNotice("Notes saved.")},function(){e.notesLoading=!1})},saveCmsLicense:function(e,t){var n=this;this.$store.dispatch("licenses/saveCmsLicense",{key:this.license.key,domain:this.licenseDraft.domain,notes:this.licenseDraft.notes}).then(function(t){e(t)}).catch(function(e){t();var s=e.data&&e.data.error?e.data.error:"Couldn’t save license.";n.$root.displayError(s)})},cancelEditDomain:function(){this.licenseDraft.domain=this.license.domain,this.domainEditing=!1,this.domainValidates=!1},cancelEditNotes:function(){this.licenseDraft.notes=this.license.notes,this.notesEditing=!1,this.notesValidates=!1},notesChange:function(){this.notesValidates=!1,this.licenseDraft.notes!==this.license.notes&&(this.notesValidates=!0)},domainChange:function(){this.domainValidates=!1,this.licenseDraft.domain!==this.license.domain&&(this.domainValidates=!0)},copyLicense:function(){var e=document.createElement("input");document.body.appendChild(e),e.value=this.license.key,e.select(),document.execCommand("copy"),e.remove(),this.$root.displayNotice("License key copied.")}},mounted:function(){this.licenseDraft={autoRenew:1==this.license.autoRenew,domain:this.license.domain,notes:this.license.notes}}},En=Nn,Un=Object(pe["a"])(En,cn,ln,!1,null,null,null);Un.options.__file="CmsLicenseDetails.vue";var Mn=Un.exports,jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Activity")]),e.history.length?n("table",{staticClass:"table"},[e._m(0),n("tbody",e._l(e.history,function(t){return n("tr",[n("td",[e._v(e._s(t.note))]),n("td",[e._v(e._s(t.timestamp))])])}))]):n("p",{staticClass:"text-secondary"},[e._v("No license history.")])])])},Rn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Notes")]),n("th",[e._v("Date")])])])}],Fn={props:["history"]},Bn=Fn,Vn=Object(pe["a"])(Bn,jn,Rn,!1,null,null,null);Vn.options.__file="LicenseHistory.vue";var Hn=Vn.exports,Kn={components:{CmsLicenseDetails:Mn,PluginLicensesTable:Et,LicenseHistory:Hn},computed:Object(ee["a"])({},Object(i["d"])({cmsLicenses:function(e){return e.licenses.cmsLicenses},pluginLicenses:function(e){return e.licenses.pluginLicenses}}),{license:function(){var e=this;return this.cmsLicenses.find(function(t){return t.id==e.$route.params.id})}}),methods:{releaseCmsLicense:function(){var e=this;if(!window.confirm("Are you sure you want to release this license?"))return!1;this.$store.dispatch("licenses/releaseCmsLicense",this.license.key).then(function(t){e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("CMS license released."),e.$router.push({path:"/account/licenses/cms"})}).catch(function(t){var n=t.data&&t.data.error?t.data.error:"Couldn’t release CMS license.";e.$root.displayError(n)})}},mounted:function(){this.$root.renewLicense=this.license}},Xn=Kn,Gn=Object(pe["a"])(Xn,rn,on,!1,null,null,null);Gn.options.__file="LicensesCmsDetails.vue";var Wn=Gn.exports,zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("license-renew-alert",{attrs:{type:"plugin","expiring-licenses":e.expiringPluginLicenses}}),n("h1",[e._v("Plugins")]),e.pluginLicenses.length>0?n("div",{staticClass:"card card-table responsive-content"},[n("plugin-licenses-table",{attrs:{licenses:e.pluginLicenses}})],1):n("div",{staticClass:"empty"},[n("div",{staticClass:"empty-body"},[n("font-awesome-icon",{staticClass:"text-5xl mb-4 text-grey-light",attrs:{icon:"key"}}),n("div",{staticClass:"font-bold"},[e._v("No plugin licenses")]),n("div",[e._v("You don’t have any plugin licenses yet.")])],1)])],1)},qn=[],Jn={components:{LicenseRenewAlert:en,PluginLicensesTable:Et},computed:Object(ee["a"])({},Object(i["d"])({pluginLicenses:function(e){return e.licenses.pluginLicenses}}),Object(i["c"])({expiringPluginLicenses:"licenses/expiringPluginLicenses"}))},Yn=Jn,Qn=Object(pe["a"])(Yn,zn,qn,!1,null,null,null);Qn.options.__file="LicensesPlugins.vue";var Zn=Qn.exports,es=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.license?n("div",[n("p",[n("router-link",{staticClass:"nav-link",attrs:{to:"/account/licenses/plugins",exact:""}},[e._v("← Plugins")])],1),n("h1",[n("code",[e._v(e._s(e.license.key.substr(0,4)))])]),n("plugin-license-details",{attrs:{license:e.license}}),n("license-history",{attrs:{history:e.license.history}}),n("div",{staticClass:"card card-danger mb-3"},[n("div",{staticClass:"card-header"},[e._v("Danger Zone")]),n("div",{staticClass:"card-body"},[n("h5",[e._v("Release license")]),n("p",[e._v("Release this license if you no longer wish to use it, so that it can be claimed by someone else.")]),n("div",[n("button",{staticClass:"btn btn-danger",on:{click:function(t){e.releasePluginLicense()}}},[e._v("Release License")])])])])],1):e._e()},ts=[],ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"mb-4"},[e._v("License Details")]),e.license?[n("div",{staticClass:"md:flex -mx-4"},[n("div",{staticClass:"md:w-1/2 px-4"},[n("dl",[e.license.plugin?[n("dt",[e._v("Plugin")]),n("dd",[e._v(e._s(e.license.plugin.name))])]:e._e(),n("dt",[e._v("License Key")]),n("dd",[n("code",[e._v(e._s(e._f("formatPluginLicense")(e.license.key)))])]),n("dt",[e._v("Craft License")]),n("dd",[e.license.cmsLicense?[n("p",[n("code",[e.license.cmsLicense.key?n("router-link",{attrs:{to:"/account/licenses/cms/"+e.license.cmsLicenseId}},[e._v(e._s(e.license.cmsLicense.key.substr(0,10)))]):[e._v(e._s(e.license.cmsLicense.shortKey))]],2),e.license.cmsLicense.edition?n("span",{staticClass:"text-secondary"},[e._v("(Craft "+e._s(e.license.cmsLicense.edition)+")")]):e._e()]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(t){e.detachCmsLicense()}}},[e._v("\n                                            Detach from this Craft license\n                                        ")]),e.detaching?n("div",{staticClass:"spinner"}):e._e()])]:[n("span",{staticClass:"text-secondary"},[e._v("Not attached to a CMS license.")]),e.originalCmsLicenseId?n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.reattachCmsLicense()}}},[e._v("Undo")]):e._e()]],2)],2)]),n("div",{staticClass:"md:w-1/2 px-4"},[n("dl",[n("dt",[e._v("Email")]),n("dd",[e._v(e._s(e.license.email))]),n("dt",[e._v("Created")]),n("dd",[e._v(e._s(e._f("moment")(e.license.dateCreated.date,"L")))]),n("dt",[e._v("Notes")]),n("dd",[e.notesEditing?e._e():[n("p",[e._v(e._s(e.license.notes))]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(t){e.notesEditing=!0}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),e._v("\n                                            Edit\n                                        ")],1)])],e.notesEditing?n("form",{on:{submit:function(t){t.preventDefault(),e.saveNotes()}}},[n("textarea-field",{attrs:{id:"notes"},on:{input:e.notesChange},model:{value:e.licenseDraft.notes,callback:function(t){e.$set(e.licenseDraft,"notes",t)},expression:"licenseDraft.notes"}}),n("input",{staticClass:"btn btn-primary",class:{disabled:!e.notesValidates},attrs:{type:"submit",value:"Save",disabled:!e.notesValidates}}),n("input",{staticClass:"btn btn-secondary",attrs:{type:"button",value:"Cancel"},on:{click:function(t){e.cancelEditNotes()}}}),e.notesLoading?n("div",{staticClass:"spinner"}):e._e()],1):e._e()],2)])])])]:e._e()],2)]),e.license.expirable&&e.license.expiresOn?n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Auto-Renew")]),e.licenseDraft.autoRenew?[e._m(0)]:[e._m(1)],n("lightswitch-field",{attrs:{id:"auto-renew",checked:e.licenseDraft.autoRenew},on:{change:e.saveAutoRenew,"update:checked":function(t){e.$set(e.licenseDraft,"autoRenew",t)}}})],2)]):e._e(),n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Updates")]),n("license-update-message",{attrs:{license:e.license}}),n("h5",[e._v("Renew License")]),n("select-field",{attrs:{options:e.renewOptions},model:{value:e.renew,callback:function(t){e.renew=t},expression:"renew"}}),n("table",{staticClass:"table mb-2"},[e._m(2),n("tbody",[n("tr",[n("td",[e._v(e._s(e.license.plugin.name))]),n("td",[e._v(e._s(e._f("moment")(e.license.expiresOn.date,"L")))]),n("td",[e._v(e._s(e._f("moment")(e.newExpiresOn,"L")))]),n("td",[e._v(e._s(e._f("currency")(e.license.edition.renewalPrice))+" "),n("span",{staticClass:"text-grey-dark"},[e._v("×")]),e._v(" "+e._s(Math.round(100*e.newExpiresOn.diff(e.license.expiresOn.date,"years",!0))/100)+" year(s)")]),n("td",[e._v(e._s(e._f("currency")(e.newExpiresOn.diff(e.license.expiresOn.date,"years",!0)*e.license.edition.renewalPrice)))])])])]),n("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"Add to cart"},on:{click:function(t){e.addToCart()}}})],1)])])},ss=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Auto-renew is "),n("strong",[e._v("enabled")]),e._v(" for this license.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Auto-renew is "),n("strong",[e._v("disabled")]),e._v(" for this license.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Item")]),n("th",[e._v("Renewal Date")]),n("th",[e._v("New Renewal Date")]),n("th",[e._v("Renewal Price")]),n("th",[e._v("Subtotal")])])])}],is={props:["license","type"],data:function(){return{errors:{},licenseDraft:{},originalCmsLicenseId:this.license.cmsLicenseId,originalCmsLicense:this.license.cmsLicense,detaching:!1,reattaching:!1,notesEditing:!1,notesLoading:!1,notesValidates:!1,renew:1}},components:Object(ee["a"])({},Le["a"],{LicenseUpdateMessage:mn}),computed:{renewOptions:function(){for(var e=[],t=1;t<=5;t++){var n=this.$moment(this.license.expiresOn.date).add(t,"year"),s=this.$moment(n).format("L"),i="Extend updates until "+s;e.push({label:i,value:t})}return e},newExpiresOn:function(){var e=this.$moment(this.license.expiresOn.date);return e.add(this.renew,"years")}},methods:{detachCmsLicense:function(){var e=this;this.detaching=!0,this.licenseDraft.cmsLicenseId=null,this.licenseDraft.cmsLicense=null,this.savePluginLicense(function(){e.detaching=!1,e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses")},function(){e.detaching=!1})},reattachCmsLicense:function(){var e=this;this.reattaching=!0,this.licenseDraft.cmsLicenseId=this.originalCmsLicenseId,this.licenseDraft.cmsLicense=this.originalCmsLicense,this.savePluginLicense(function(){e.reattaching=!1},function(){e.reattaching=!1})},canSave:function(){return this.license.notes!==this.licenseDraft.notes},saveNotes:function(){var e=this;this.notesLoading=!0,this.savePluginLicense(function(){e.notesLoading=!1,e.notesEditing=!1},function(){e.notesLoading=!1})},cancelEditNotes:function(){this.licenseDraft.notes=this.license.notes,this.notesEditing=!1,this.notesValidates=!1},notesChange:function(){this.notesValidates=!1,this.licenseDraft.notes!==this.license.notes&&(this.notesValidates=!0)},savePluginLicense:function(e,t){var n=this;this.$store.dispatch("licenses/savePluginLicense",{pluginHandle:this.license.plugin.handle,key:this.license.key,cmsLicenseId:this.licenseDraft.cmsLicenseId,cmsLicense:this.licenseDraft.cmsLicense,notes:this.licenseDraft.notes}).then(function(t){e(),n.$root.displayNotice("License saved.")}).catch(function(e){t();var s=e.data&&e.data.error?e.data.error:"Couldn’t save license.";n.$root.displayError(s)})},saveAutoRenew:function(){var e=this;this.$store.dispatch("licenses/savePluginLicense",{pluginHandle:this.license.plugin.handle,key:this.license.key,autoRenew:this.licenseDraft.autoRenew?1:0}).then(function(t){e.licenseDraft.autoRenew?e.$root.displayNotice("Auto renew enabled."):e.$root.displayNotice("Auto renew disabled."),e.$store.dispatch("licenses/getCmsLicenses")}).catch(function(t){e.$root.displayError("Couldn’t save license."),e.errors=t.errors})},addToCart:function(){var e=this,t={type:"renewal",lineItem:{total:this.newExpiresOn.diff(this.license.expiresOn.date,"years",!0)*this.license.edition.renewalPrice}};this.$store.dispatch("cart/addToCartMock",{item:t}).then(function(t){e.$router.push({path:"/cart"})})}},mounted:function(){this.licenseDraft={cmsLicenseId:this.license.cmsLicenseId,cmsLicense:this.license.cmsLicense,autoRenew:1==this.license.autoRenew,notes:this.license.notes}}},as=is,rs=Object(pe["a"])(as,ns,ss,!1,null,null,null);rs.options.__file="PluginLicenseDetails.vue";var os=rs.exports,cs={components:{CmsLicensesTable:It,PluginLicenseDetails:os,LicenseHistory:Hn},computed:Object(ee["a"])({},Object(i["d"])({pluginLicenses:function(e){return e.licenses.pluginLicenses}}),{license:function(){var e=this;return this.pluginLicenses.find(function(t){return t.id==e.$route.params.id})}}),methods:{releasePluginLicense:function(){var e=this;if(!window.confirm("Are you sure you want to release this license?"))return!1;this.$store.dispatch("licenses/releasePluginLicense",{pluginHandle:this.license.plugin.handle,licenseKey:this.license.key}).then(function(t){e.$store.dispatch("licenses/getCmsLicenses"),e.$store.dispatch("licenses/getPluginLicenses"),e.$store.dispatch("account/getInvoices"),e.$root.displayNotice("Plugin license released."),e.$router.push({path:"/account/licenses/plugins"})}).catch(function(t){var n=t.data&&t.data.error?t.data.error:"Couldn’t release plugin license.";e.$root.displayError(n)})}}},ls=cs,ds=Object(pe["a"])(ls,es,ts,!1,null,null,null);ds.options.__file="LicensesPluginsDetails.vue";var us=ds.exports,ps=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("stripe-account-alert"),n("h1",[e._v("Sales")]),e.salesToRender.length>0?[n("div",{staticClass:"field mb-6"},[n("text-input",{staticClass:"form-control",attrs:{id:"searchQuery",name:"searchQuery",type:"text",placeholder:"Search sales"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),n("div",{staticClass:"card card-table responsive-content"},[n("table",{staticClass:"table"},[e._m(0),n("tbody",e._l(e.salesToRender,function(t){return n("tr",[n("td",[e._v(e._s(t.plugin.name))]),n("td",{staticClass:"text-secondary"},[e._v(e._s(t.type))]),n("td",[n("a",{attrs:{href:"mailto:"+t.customer.email}},[e._v(e._s(t.customer.email))])]),n("td",[e._v(e._s(e._f("currency")(t.grossAmount)))]),n("td",[e._v(e._s(e._f("currency")(t.netAmount)))]),n("td",{staticClass:"date-col"},[e._v(e._s(e._f("moment")(t.saleTime,"LLL")))])])}))])])]:[n("div",{staticClass:"empty"},[n("div",{staticClass:"empty-body"},[n("font-awesome-icon",{staticClass:"text-5xl mb-4 text-grey-light",attrs:{icon:"dollar-sign"}}),n("div",{staticClass:"font-bold"},[e._v("No sales")]),n("div",[e._v("You don’t have any sales yet.")])],1)])]],2)},fs=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Item")]),n("th",[e._v("Type")]),n("th",[e._v("Customer")]),n("th",[e._v("Gross Amount")]),n("th",[e._v("Net Amount")]),n("th",[e._v("Date")])])])}],hs=(n("3b2b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$root.stripeAccountLoading||e.stripeAccount?e._e():n("div",{staticClass:"top-alert alert alert-warning",attrs:{role:"alert"}},[n("strong",[e._v("Stripe account missing.")]),e._v("\n    Define a Stripe account in the "),n("router-link",{attrs:{to:"/developer/settings"}},[e._v("developer settings")]),e._v(".\n")],1)}),ms=[],vs={computed:Object(ee["a"])({},Object(i["d"])({stripeAccount:function(e){return e.account.stripeAccount}}))},gs=vs,bs=Object(pe["a"])(gs,hs,ms,!1,null,null,null);bs.options.__file="StripeAccountAlert.vue";var _s=bs.exports,Cs={components:Object(ee["a"])({},Le["a"],{StripeAccountAlert:_s}),data:function(){return{searchQuery:""}},computed:Object(ee["a"])({},Object(i["d"])({sales:function(e){return e.developers.sales}}),{salesToRender:function(){var e=this.searchQuery;return this.sales.filter(function(t){if(t){var n=new RegExp(e,"gi");if(t.customer.name.match(n))return!0;if(t.customer.email.match(n))return!0}})}})},ys=Cs,ws=Object(pe["a"])(ys,ps,fs,!1,null,null,null);ws.options.__file="Sales.vue";var Ls=ws.exports,ks=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.sale?n("div",[n("p",[n("router-link",{staticClass:"nav-link",attrs:{to:"/developer/sales",exact:""}},[e._v("← Sales")])],1),n("h1",[e._v("#SAL000"+e._s(e.sale.id))]),n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("h3",[e._v(e._s(e._f("currency")(e.sale.netAmount)))]),n("p",{staticClass:"text-secondary"},[e._v("#SAL000"+e._s(e.sale.id))]),n("hr"),n("div",{staticClass:"responsive-content"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"w-1/2"},[n("dl",[n("dt",[e._v("Item")]),n("dd",[e._v(e._s(e.sale.plugin.name))]),n("dt",[e._v("Type")]),n("dd",[e._v(e._s(e.sale.type))]),n("dt",[e._v("Gross Amount")]),n("dd",[e._v(e._s(e._f("currency")(e.sale.grossAmount)))]),n("dt",[e._v("Net Amount")]),n("dd",[e._v(e._s(e._f("currency")(e.sale.netAmount)))])])]),n("div",{staticClass:"w-1/2"},[n("dl",[n("dt",[e._v("Sale ID")]),n("dd",[e._v("#SAL000"+e._s(e.sale.id))]),n("dt",[e._v("Customer")]),n("dd",[n("a",{attrs:{href:"mailto:"+e.sale.customer.email}},[e._v(e._s(e.sale.customer.email))])]),n("dt",[e._v("Date")]),n("dd",[e._v(e._s(e.sale.date))])])])])])])])]):e._e()},xs=[],Ds={computed:Object(ee["a"])({},Object(i["c"])({getSaleById:"developers/getSaleById"}),{sale:function(){return this.getSaleById(this.$route.params.id)}})},Ps=Ds,$s=Object(pe["a"])(Ps,ks,xs,!1,null,null,null);$s.options.__file="SalesDetails.vue";var Is=$s.exports,Ss=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-3"},[n("p",[n("router-link",{staticClass:"nav-link",attrs:{to:"/developer/plugins",exact:""}},[e._v("← Plugins")])],1),e.plugin?n("h1",[e._v(e._s(e.plugin.name))]):n("h1",[e._v("Add a plugin")]),e.pluginId||this.pluginDraft.repository?[e.plugin&&!e.plugin.enabled?n("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[e.plugin.pendingApproval?[e._v("\n                Your plugin is being reviewed, it will be automatically published once it’s approved.\n            ")]:[e.plugin.lastHistoryNote&&e.plugin.lastHistoryNote.devComments?[n("h6",[e._v("Changes requested")]),n("div",{domProps:{innerHTML:e._s(e.plugin.lastHistoryNote.devComments)}}),n("a",{staticClass:"btn btn-secondary btn-sm",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.submit()}}},[e._v("Re-submit for Approval")])]:[n("a",{staticClass:"btn btn-secondary btn-sm",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.submit()}}},[e._v("Submit for Approval")])],n("span",{staticClass:"text-secondary"},[e._v("Your plugin will be automatically published once it’s approved.")])],e.pluginSubmitLoading?n("div",{staticClass:"spinner"}):e._e()],2):e._e(),n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-header"},[e._v("GitHub Repository")]),n("div",{staticClass:"card-body"},[n("text-field",{attrs:{id:"repository",label:"Repository URL",errors:e.errors.repository,disabled:"true"},model:{value:e.pluginDraft.repository,callback:function(t){e.$set(e.pluginDraft,"repository",t)},expression:"pluginDraft.repository"}})],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-header"},[e._v("Plugin Icon")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"mr-6"},[n("div",{staticClass:"field"},[n("img",{attrs:{src:e.pluginDraft.iconUrl,height:"80"}})])]),n("div",{staticClass:"flex-1"},[n("div",{staticClass:"field"},[n("div",{staticClass:"instructions"},[n("p",[e._v("Plugin icons must be square SVG files, and should not exceed "+e._s(e.maxUploadSize)+".")])]),n("input",{ref:"iconFile",staticClass:"form-control",class:{"is-invalid":e.errors.iconId},attrs:{type:"file"},on:{change:e.changeIcon}}),e._l(e.errors.iconId,function(t){return n("div",{staticClass:"invalid-feedback"},[e._v(e._s(t))])})],2)])])])]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-header"},[e._v("Plugin Details")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"flex flex-wrap -mx-4"},[n("div",{staticClass:"w-1/2 px-4"},[n("text-field",{attrs:{id:"name",label:"Name",errors:e.errors.name},on:{input:e.onInputName},model:{value:e.pluginDraft.name,callback:function(t){e.$set(e.pluginDraft,"name",t)},expression:"pluginDraft.name"}})],1),n("div",{staticClass:"w-1/2 px-4"},[n("text-field",{attrs:{id:"packageName",label:"Package Name",errors:e.errors.packageName,disabled:"true"},model:{value:e.pluginDraft.packageName,callback:function(t){e.$set(e.pluginDraft,"packageName",t)},expression:"pluginDraft.packageName"}})],1),n("div",{staticClass:"w-1/2 px-4"},[n("text-field",{attrs:{id:"handle",label:"Plugin Handle",errors:e.errors.handle,disabled:"true"},model:{value:e.pluginDraft.handle,callback:function(t){e.$set(e.pluginDraft,"handle",t)},expression:"pluginDraft.handle"}})],1),n("div",{staticClass:"w-1/2 px-4"},[n("div",{staticClass:"field"},[n("label",{attrs:{for:"license"}},[e._v("License")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.pluginDraft.license,expression:"pluginDraft.license"}],staticClass:"form-control w-full",attrs:{id:"license"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.pluginDraft,"license",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"craft"}},[e._v("Craft")]),n("option",{attrs:{value:"mit"}},[e._v("MIT")])])])])]),n("text-field",{attrs:{id:"shortDescription",label:"Short Description",errors:e.errors.shortDescription},model:{value:e.pluginDraft.shortDescription,callback:function(t){e.$set(e.pluginDraft,"shortDescription",t)},expression:"pluginDraft.shortDescription"}}),n("textarea-field",{attrs:{id:"longDescription",label:"Long Description",errors:e.errors.longDescription,rows:"16"},model:{value:e.pluginDraft.longDescription,callback:function(t){e.$set(e.pluginDraft,"longDescription",t)},expression:"pluginDraft.longDescription"}}),e._m(0),n("text-field",{attrs:{id:"documentationUrl",label:"Documentation URL",errors:e.errors.documentationUrl},model:{value:e.pluginDraft.documentationUrl,callback:function(t){e.$set(e.pluginDraft,"documentationUrl",t)},expression:"pluginDraft.documentationUrl"}}),n("text-field",{attrs:{id:"changelogPath",label:"Changelog Path",instructions:"The path to your changelog file, relative to the repository root.",errors:e.errors.changelogPath},model:{value:e.pluginDraft.changelogPath,callback:function(t){e.$set(e.pluginDraft,"changelogPath",t)},expression:"pluginDraft.changelogPath"}}),n("plugin-categories",{attrs:{"plugin-draft":e.pluginDraft}}),n("text-field",{attrs:{id:"keywords",label:"Keywords",instructions:"Comma-separated list of keywords.",errors:e.errors.keywords},model:{value:e.pluginDraft.keywords,callback:function(t){e.$set(e.pluginDraft,"keywords",t)},expression:"pluginDraft.keywords"}})],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-header"},[e._v("Screenshots")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"field"},[n("div",{staticClass:"instructions"},[n("p",[e._v("Plugin screenshots must be JPG or PNG files, and should not exceed "+e._s(e.maxUploadSize)+".")])]),n("input",{ref:"screenshotFiles",staticClass:"form-control",attrs:{type:"file",multiple:""}})]),n("div",{ref:"screenshots",staticClass:"d-inline"},[n("draggable",{model:{value:e.screenshots,callback:function(t){e.screenshots=t},expression:"screenshots"}},e._l(e.screenshots,function(t,s){return n("div",{staticClass:"screenshot"},[n("img",{staticClass:"img-thumbnail mr-3 mb-3",attrs:{src:t.url}}),n("a",{staticClass:"remove btn btn-sm btn-danger",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.removeScreenshot(s)}}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1)])}))],1)])]),e.showPriceFields?n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-header"},[e._v("Pricing")]),n("div",{staticClass:"card-body"},[n("text-field",{attrs:{id:"price",label:"License Price",errors:e.errors.price},model:{value:e.pluginDraft.price,callback:function(t){e.$set(e.pluginDraft,"price",t)},expression:"pluginDraft.price"}}),n("text-field",{attrs:{id:"renewalPrice",label:"Renewal Price",errors:e.errors.renewalPrice},model:{value:e.pluginDraft.renewalPrice,callback:function(t){e.$set(e.pluginDraft,"renewalPrice",t)},expression:"pluginDraft.renewalPrice"}})],1)]):e._e(),n("div",[n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save",disabled:e.loading}}),e.loading?n("div",{staticClass:"spinner"}):e._e()])])]:[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[e.connectedAppsCount>0?[n("p",[e._v("To get started, select a repository for your plugin.")]),e._l(e.apps,function(t,s){return n("div",{staticClass:"mb-3"},[n("repositories",{attrs:{appHandle:s,"loading-repository":e.loadingRepository},on:{selectRepository:e.onSelectRepository}})],1)}),n("div",[n("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/account/settings#connected-apps"}},[e._v("Manage connected apps")])],1)]:[n("h2",[e._v("Connect")]),n("p",[e._v("Connect to GitHub to retrieve your repositories.")]),n("connected-apps")]],2)])]],2)},Os=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-secondary"},[n("small",[e._v("Styling with Markdown is supported.")])])}],Ts=(n("456d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("text-field",{attrs:{placeholder:"Filter repositories"},model:{value:e.q,callback:function(t){e.q=t},expression:"q"}}),e.filteredRepositories.length>0?n("div",{staticClass:"list-group"},e._l(e.filteredRepositories,function(t){return n("div",{staticClass:"list-group-item"},[n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"flex-1"},[e._v("\n                    "+e._s(t.full_name)+"\n                ")]),n("div",[e.isLoading(t.html_url)?n("div",{staticClass:"spinner"}):e._e(),e.repositoryIsInUse(t.html_url)?n("a",{staticClass:"btn btn-sm btn-light disabled",class:{disabled:e.repositoryIsInUse(t.html_url)},attrs:{href:"#"}},[e._v("Already in use")]):n("a",{staticClass:"btn btn-sm btn-primary",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.$emit("selectRepository",t)}}},[e._v("Select")])])])])})):n("p",[e._v("No repositories.")])],1)}),As=[],Ns=n("9380"),Es=n.n(Ns),Us=n("8a30"),Ms=n.n(Us),js={components:Object(ee["a"])({},Le["a"]),props:["appHandle","loadingRepository"],data:function(){return{q:""}},computed:Object(ee["a"])({},Object(i["d"])({apps:function(e){return e.account.apps}}),Object(i["c"])({repositoryIsInUse:"developers/repositoryIsInUse"}),{app:function(){return this.apps[this.appHandle]},repositories:function(){var e=this,t=this.app.repositories.filter(function(t){return!e.repositoryIsInUse(t.html_url)}),n=this.app.repositories.filter(function(t){return e.repositoryIsInUse(t.html_url)});return t.concat(n)},filteredRepositories:function(){var e=this.q;return e?Es()(this.repositories,function(t){if(t.full_name&&Ms()(t.full_name.toLowerCase(),e.toLowerCase()))return!0}):this.repositories}}),methods:{isLoading:function(e){return this.loadingRepository===e}}},Rs=js,Fs=Object(pe["a"])(Rs,Ts,As,!1,null,null,null);Fs.options.__file="Repositories.vue";var Bs=Fs.exports,Vs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"field"},[n("label",{attrs:{id:"categories"}},[e._v("Categories")]),n("div",{staticClass:"instructions"},[n("p",[e._v("Pick up to "+e._s(e.maxCategories)+" categories. ("+e._s(e.pluginDraft.categoryIds.length)+"/"+e._s(e.maxCategories)+" selected)")])]),n("draggable",{model:{value:e.pluginDraft.categoryIds,callback:function(t){e.$set(e.pluginDraft,"categoryIds",t)},expression:"pluginDraft.categoryIds"}},e._l(e.selectedCategories,function(t){return n("div",{staticClass:"alert float-left clearfix mb-3 mr-2 px-3 py-2"},[n("div",{staticClass:"flex"},[n("div",[e._v(e._s(t.title))]),n("div",{staticClass:"ml-3 mt-1"},[n("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.unselectCategory(t.id)}}},[n("font-awesome-icon",{staticClass:"text-red",attrs:{icon:"times"}})],1)])])])})),n("div",{staticClass:"clearfix"}),n("div",e._l(e.availableCategories,function(t){return n("div",{staticClass:"inline-block"},[n("a",{staticClass:"btn btn-outline-secondary mb-2 mr-2",class:{disabled:e.pluginDraft.categoryIds.length>=e.maxCategories},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.selectCategory(t.id)}}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n                    "+e._s(t.title)+"\n                ")],1)])}))],1)])},Hs=[],Ks=n("1516"),Xs=n.n(Ks),Gs={components:{draggable:Xs.a},props:["pluginDraft"],data:function(){return{maxCategories:3}},computed:Object(ee["a"])({},Object(i["d"])({categories:function(e){return e.craftId.categories}}),{selectedCategories:function(){var e=this,t=[];return this.pluginDraft.categoryIds.forEach(function(n){var s=e.categories.find(function(e){return e.id==n});t.push(s)}),t},availableCategories:function(){var e=this;return this.categories.filter(function(t){return!e.pluginDraft.categoryIds.find(function(e){return e==t.id})})},categoryOptions:function(){var e=this,t=[];return this.categories.forEach(function(n){var s=e.pluginDraft.categoryIds.find(function(e){return e==n.id}),i={label:n.title,value:n.id,checked:s};t.push(i)}),t}}),methods:{selectCategory:function(e){if(this.pluginDraft.categoryIds.length<this.maxCategories){var t=this.pluginDraft.categoryIds.find(function(t){return t==e});t||this.pluginDraft.categoryIds.push(e)}},unselectCategory:function(e){var t=this.pluginDraft.categoryIds.indexOf(e);-1!==t&&this.pluginDraft.categoryIds.splice(t,1)}}},Ws=Gs,zs=Object(pe["a"])(Ws,Vs,Hs,!1,null,null,null);zs.options.__file="PluginCategories.vue";var qs=zs.exports,Js=n("5392"),Ys=n.n(Js),Qs={components:Object(ee["a"])({ConnectedApps:we,Repositories:Bs,PluginCategories:qs,draggable:Xs.a},Le["a"]),data:function(){return{loading:!1,pluginSubmitLoading:!1,repositoryLoading:!1,loadingRepository:null,pluginDraft:{id:null,icon:null,iconId:null,developerId:null,enabled:!1,handle:"",packageName:"",name:"",shortDescription:"",longDescription:"",documentationUrl:"",changelogPath:"",repository:"",license:"craft",price:0,renewalPrice:0,iconUrl:null,categoryIds:[],screenshots:[],screenshotIds:[],screenshotUrls:[],keywords:""},errors:{}}},computed:Object(ee["a"])({},Object(i["d"])({apps:function(e){return e.account.apps},plugins:function(e){return e.developers.plugins}}),Object(i["c"])({userIsInGroup:"account/userIsInGroup"}),{pluginId:function(){return this.$route.params.id},plugin:function(){var e=this;return this.plugins.find(function(t){return t.id==e.pluginId})},connectedAppsCount:function(){return Object.keys(this.apps).length},screenshots:{get:function(){var e=this,t=[];return this.pluginDraft.screenshotIds.forEach(function(n,s){var i={id:n,url:e.pluginDraft.screenshotUrls[s]};t.push(i)}),t},set:function(e){var t=[],n=[];e.forEach(function(e){t.push(e.id),n.push(e.url)}),this.pluginDraft.screenshotIds=t,this.pluginDraft.screenshotUrls=n}},showPriceFields:function(){return!this.plugin||(!this.plugin.enabled||this.plugin.enabled&&this.plugin.price)},maxUploadSize:function(){return this.humanFileSize(Craft.maxUploadSize)}}),methods:{onInputName:function(e){if(!this.pluginId){var t=Ys()(e);this.pluginDraft.handle=t}},onSelectRepository:function(e){this.loadDetails(e.html_url)},removeScreenshot:function(e){this.pluginDraft.screenshotUrls.splice(e,1),this.pluginDraft.screenshotIds.splice(e,1);for(var t=this.$refs.screenshots.getElementsByClassName("btn"),n=0;n<t.length;n++)t[n].blur()},changeScreenshots:function(e){this.pluginDraft.screenshotUrls=[];for(var t=this.$refs.screenshotFiles.files,n=0;n<t.length;n++){var s=new FileReader;s.onload=function(e){var t=e.target.result;this.pluginDraft.screenshotUrls.push(t)}.bind(this),s.readAsDataURL(t[n])}},changeIcon:function(e){this.pluginDraft.icon=e.target.value;var t=new FileReader;t.onload=function(e){this.pluginDraft.iconUrl=e.target.result}.bind(this),t.readAsDataURL(this.$refs.iconFile.files[0])},loadDetails:function(e){var t=this;this.repositoryLoading=!0,this.loadingRepository=e;var n={repository:encodeURIComponent(i),action:"craftnet/plugins/load-details"};n[Craft.csrfTokenName]=Craft.csrfTokenValue;var s=c.a.stringify(n),i=e;r.a.post(Craft.actionUrl+"/craftnet/plugins/load-details&repository="+encodeURIComponent(i),s).then(function(n){t.repositoryLoading=!1,t.loadingRepository=null,n.data.error?t.$root.displayError(n.data.error):(t.pluginDraft.repository=e,n.data.changelogPath&&(t.pluginDraft.changelogPath=n.data.changelogPath),n.data.documentationUrl&&(t.pluginDraft.documentationUrl=n.data.documentationUrl),n.data.name&&(t.pluginDraft.name=n.data.name),n.data.handle&&(t.pluginDraft.handle=n.data.handle),n.data.shortDescription&&(t.pluginDraft.shortDescription=n.data.shortDescription),n.data.packageName&&(t.pluginDraft.packageName=n.data.packageName),n.data.iconId&&(t.pluginDraft.iconId=n.data.iconId),n.data.iconUrl&&(t.pluginDraft.iconUrl=n.data.iconUrl),n.data.license&&(t.pluginDraft.license=n.data.license),n.data.keywords&&(t.pluginDraft.keywords=n.data.keywords.join(", ")))}).catch(function(e){t.repositoryLoading=!1,t.$root.displayError("Couldn’t load repository")})},save:function(){var e=this;this.loading=!0;var t={icon:this.$refs.iconFile.files[0],handle:this.pluginDraft.handle,packageName:this.pluginDraft.packageName,name:this.pluginDraft.name,shortDescription:this.pluginDraft.shortDescription,longDescription:this.pluginDraft.longDescription,documentationUrl:this.pluginDraft.documentationUrl,changelogPath:this.pluginDraft.changelogPath,repository:this.pluginDraft.repository,license:this.pluginDraft.license,price:this.pluginDraft.price,renewalPrice:this.pluginDraft.renewalPrice,keywords:this.pluginDraft.keywords,categoryIds:[],screenshotIds:[]};this.pluginDraft.iconId&&(t.iconId=[parseInt(this.pluginDraft.iconId)]),this.pluginDraft.id&&(t.pluginId=this.pluginDraft.id),this.pluginDraft.categoryIds.length>0&&(t.categoryIds=this.pluginDraft.categoryIds),this.$refs.screenshotFiles.files.length>0&&(t.screenshots=this.$refs.screenshotFiles.files),this.pluginDraft.screenshotUrls.length>0&&(t.screenshotUrls=this.pluginDraft.screenshotUrls),this.pluginDraft.screenshotIds.length>0&&(t.screenshotIds=this.pluginDraft.screenshotIds),this.$store.dispatch("developers/savePlugin",{plugin:t}).then(function(t){e.loading=!1,e.$root.displayNotice("Plugin saved."),e.$router.push({path:"/developer/plugins"})}).catch(function(t){e.loading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t save plugin.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})},submit:function(){var e=this;this.pluginSubmitLoading=!0,this.$store.dispatch("developers/submitPlugin",this.plugin.id).then(function(t){e.pluginSubmitLoading=!1,e.$root.displayNotice("Plugin submitted for approval.")}).catch(function(t){e.pluginSubmitLoading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t submit plugin for approval.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})},humanFileSize:function(e){var t=1024;if(e<t)return e+" B";var n=["kB","MB","GB","TB","PB","EB","ZB","YB"],s=-1;do{e/=t,++s}while(e>=t);return e.toFixed(1)+" "+n[s]}},mounted:function(){this.plugin?(this.pluginDraft=JSON.parse(JSON.stringify(this.plugin)),this.pluginDraft.price||(this.pluginDraft.price=0),this.pluginDraft.renewalPrice||(this.pluginDraft.renewalPrice=0)):this.pluginId&&this.$router.push({path:"/developer/plugins"})}},Zs=Qs,ei=(n("63b6"),Object(pe["a"])(Zs,Ss,Os,!1,null,"49500195",null));ei.options.__file="PluginsEdit.vue";var ti=ei.exports,ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("stripe-account-alert"),n("div",{staticClass:"flex justify-between mb-2"},[n("h1",[e._v("Plugins")]),n("div",[n("router-link",{staticClass:"btn btn-primary",attrs:{to:"/developer/add-plugin"}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),e._v("\n                Add a plugin\n            ")],1)],1)]),e.computedPlugins.length>0?n("div",{staticClass:"card card-table responsive-content"},[n("table",{staticClass:"table"},[e._m(0),n("tbody",e._l(e.computedPlugins,function(t){return n("tr",[n("td",{staticClass:"icon-col"},[n("router-link",{attrs:{to:"/developer/plugins/"+t.id}},[t.iconUrl?n("img",{attrs:{src:t.iconUrl,height:"36"}}):n("img",{attrs:{src:"/craftnetresources/id/dist/images/default-plugin.svg",height:"36"}})])],1),n("td",{staticClass:"name-col"},[n("router-link",{attrs:{to:"/developer/plugins/"+t.id}},[e._v(e._s(t.name))]),t.latestVersion?n("small",{staticClass:"text-secondary"},[e._v(e._s(t.latestVersion))]):e._e(),n("div",[e._v(e._s(t.shortDescription))])],1),n("td",[e._v(e._s(t.activeInstalls))]),n("td",[t.price&&"0.00"!=t.price?[e._v("\n                        "+e._s(e._f("currency")(t.price))+"\n\n                        "),t.renewalPrice&&"0.00"!=t.renewalPrice?[n("br"),n("em",{staticClass:"text-secondary text-nowrap"},[e._v(e._s(e._f("currency")(t.renewalPrice))+" per year")])]:e._e()]:[e._v("\n                        Free\n                    ")]],2),n("td",[t.enabled?[n("span",{staticClass:"text-green"},[e._v("Approved")])]:[t.pendingApproval?n("span",{staticClass:"text-secondary"},[e._v("In Review")]):[t.lastHistoryNote&&t.lastHistoryNote.devComments?n("span",{staticClass:"text-warning"},[e._v("Changes requested")]):n("span",{staticClass:"text-secondary"},[e._v("Prepare for submission")])]]],2)])}))])]):n("div",{staticClass:"empty"},[n("div",{staticClass:"empty-body"},[n("font-awesome-icon",{staticClass:"text-5xl mb-4 text-grey-light",attrs:{icon:"plug"}}),n("div",{staticClass:"font-bold"},[e._v("No plugins")]),n("div",[e._v("You haven’t added any plugins yet.")])],1)])],1)},si=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th"),n("th",[e._v("Name")]),n("th",[e._v("Active Installs")]),n("th",[e._v("Price")]),n("th",[e._v("Status")])])])}],ii=(n("55dd"),{components:{StripeAccountAlert:_s},data:function(){return{showSpinner:1}},computed:Object(ee["a"])({},Object(i["d"])({plugins:function(e){return e.developers.plugins}}),{computedPlugins:function(){var e=JSON.parse(JSON.stringify(this.plugins));return e.sort(function(e,t){return e["name"].toLowerCase()<t["name"].toLowerCase()?-1:e["name"].toLowerCase()>t["name"].toLowerCase()?1:0}),e}})}),ai=ii,ri=Object(pe["a"])(ai,ni,si,!1,null,null,null);ri.options.__file="Plugins.vue";var oi=ri.exports,ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.userDraft?n("form",{on:{submit:function(t){t.preventDefault(),e.save()}}},[n("h1",[e._v("Settings")]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Email & password")]),n("password-field",{attrs:{id:"password",label:"Current Password",errors:e.errors.currentPassword},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("text-field",{attrs:{id:"email",label:"Email",errors:e.errors.email},model:{value:e.userDraft.email,callback:function(t){e.$set(e.userDraft,"email",t)},expression:"userDraft.email"}}),n("password-field",{attrs:{id:"newPassword",label:"New Password",errors:e.errors.newPassword},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)]),n("div",{staticClass:"card mb-6"},[n("div",{staticClass:"card-body"},[n("h4",[e._v("Account Settings")]),n("text-field",{attrs:{id:"username",label:"Username",errors:e.errors.username},model:{value:e.userDraft.username,callback:function(t){e.$set(e.userDraft,"username",t)},expression:"userDraft.username"}}),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userDraft.enablePluginDeveloperFeatures,expression:"userDraft.enablePluginDeveloperFeatures"}],attrs:{id:"enablePluginDeveloperFeatures",disabled:e.userIsInGroup("developers"),type:"checkbox",name:"fields[enablePluginDeveloperFeatures]"},domProps:{checked:Array.isArray(e.userDraft.enablePluginDeveloperFeatures)?e._i(e.userDraft.enablePluginDeveloperFeatures,null)>-1:e.userDraft.enablePluginDeveloperFeatures},on:{change:function(t){var n=e.userDraft.enablePluginDeveloperFeatures,s=t.target,i=!!s.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);s.checked?r<0&&e.$set(e.userDraft,"enablePluginDeveloperFeatures",n.concat([a])):r>-1&&e.$set(e.userDraft,"enablePluginDeveloperFeatures",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.userDraft,"enablePluginDeveloperFeatures",i)}}}),n("label",{class:e.userIsInGroup("developers")?"disabled":"",attrs:{for:"enablePluginDeveloperFeatures"}},[e._v("Enable plugin developer features")])]),e.userIsInGroup("staff")?n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userDraft.enableShowcaseFeatures,expression:"userDraft.enableShowcaseFeatures"}],attrs:{id:"enableShowcaseFeatures",type:"checkbox",name:"fields[enableShowcaseFeatures]"},domProps:{checked:Array.isArray(e.userDraft.enableShowcaseFeatures)?e._i(e.userDraft.enableShowcaseFeatures,null)>-1:e.userDraft.enableShowcaseFeatures},on:{change:function(t){var n=e.userDraft.enableShowcaseFeatures,s=t.target,i=!!s.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);s.checked?r<0&&e.$set(e.userDraft,"enableShowcaseFeatures",n.concat([a])):r>-1&&e.$set(e.userDraft,"enableShowcaseFeatures",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.userDraft,"enableShowcaseFeatures",i)}}}),n("label",{attrs:{for:"enableShowcaseFeatures"}},[e._v("Enable showcase features")])]):n("input",{directives:[{name:"model",rawName:"v-model",value:e.userDraft.enableShowcaseFeatures,expression:"userDraft.enableShowcaseFeatures"}],attrs:{type:"hidden",name:"fields[enableShowcaseFeatures]"},domProps:{value:e.userDraft.enableShowcaseFeatures},on:{input:function(t){t.target.composing||e.$set(e.userDraft,"enableShowcaseFeatures",t.target.value)}}})],1)]),n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Save",disabled:e.loading}}),e.loading?n("div",{staticClass:"spinner"}):e._e()]):e._e()},li=[],di={components:Object(ee["a"])({},Le["a"]),data:function(){return{loading:!1,photoLoading:!1,userDraft:{},password:"",newPassword:"",errors:{}}},computed:Object(ee["a"])({},Object(i["d"])({currentUser:function(e){return e.account.currentUser}}),Object(i["c"])({userIsInGroup:"account/userIsInGroup"})),methods:{save:function(){var e=this;this.loading=!0;var t=!1;this.currentUser.email!==this.userDraft.email&&(t=!0),this.$store.dispatch("account/saveUser",{id:this.userDraft.id,email:this.userDraft.email,username:this.userDraft.username,enablePluginDeveloperFeatures:this.userDraft.enablePluginDeveloperFeatures?1:0,enableShowcaseFeatures:this.userDraft.enableShowcaseFeatures?1:0,password:this.password,newPassword:this.newPassword}).then(function(n){e.loading=!1,t?(e.userDraft.email=e.currentUser.email,e.$root.displayNotice("You’ve been sent an email to verify your new email address.")):e.$root.displayNotice("Settings saved."),e.password="",e.newPassword="",e.errors={}}).catch(function(t){e.loading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t save settings.";e.$root.displayError(n),e.errors=t.data&&t.data.errors?t.data.errors:{}})}},mounted:function(){this.userDraft=JSON.parse(JSON.stringify(this.currentUser))}},ui=di,pi=Object(pe["a"])(ui,ci,li,!1,null,null,null);pi.options.__file="Settings.vue";var fi=pi.exports,hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Developer Settings")]),n("h2",[e._v("Connected Apps")]),n("connected-apps",{attrs:{title:"Connected Apps","show-stripe":!0}}),n("div",{staticClass:"card mt-6"},[n("div",{staticClass:"card-body"},[n("form",{on:{submit:function(t){t.preventDefault(),e.generateToken()}}},[n("h4",[e._v("API Token")]),e.notice?n("p",[e._v("This is your new API token, "),n("strong",[e._v("keep it someplace safe")]),e._v(".")]):e._e(),n("div",{staticClass:"max-w-sm"},[n("text-field",{ref:"apiTokenField",staticClass:"mono",attrs:{id:"apiToken",spellcheck:"false",readonly:!0},model:{value:e.apiToken,callback:function(t){e.apiToken=t},expression:"apiToken"}})],1),e.apiToken?n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Generate new API Token"}}):n("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Generate API Token"}}),e.loading?n("div",{staticClass:"spinner"}):e._e()])])])],1)},mi=[],vi={data:function(){return{apiToken:"",loading:!1,notice:!1}},components:Object(ee["a"])({ConnectedApps:we},Le["a"]),computed:Object(ee["a"])({},Object(i["d"])({hasApiToken:function(e){return e.developers.hasApiToken},currentUser:function(e){return e.account.currentUser}})),methods:{generateToken:function(){var e=this;this.loading=!0,this.$store.dispatch("developers/generateApiToken").then(function(t){e.apiToken=t.data.apiToken;var n=e.$refs.apiTokenField.$el.querySelector("input");e.$nextTick(function(){n.select()}),e.notice=!0,e.loading=!1,e.$root.displayNotice("API token generated.")}).catch(function(t){e.loading=!1;var n=t.data&&t.data.error?t.data.error:"Couldn’t generate API token.";e.$root.displayError(n)})}},mounted:function(){this.hasApiToken&&(this.apiToken="****************************************")}},gi=vi,bi=Object(pe["a"])(gi,hi,mi,!1,null,null,null);bi.options.__file="DeveloperSettings.vue";var _i=bi.exports,Ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Buy a license")]),n("h2",[e._v("Buy a plugin license")]),n("div",{staticClass:"flex items-center mb-4"},[n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPluginHandle,expression:"selectedPluginHandle"}],staticClass:"w-full",attrs:{placeholder:"Select a plugin"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedPluginHandle=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("Select a plugin")]),e._l(e.commercialPlugins,function(t,s){return n("option",{key:s,domProps:{value:t.handle}},[e._v("\n                    "+e._s(t.name)+" (Starting at $"+e._s(t.editions[0].price)+")\n                ")])})],2)]),n("div",[e.loading?n("div",{staticClass:"spinner"}):e._e()])]),e.selectedPlugin?n("ul",{staticClass:"list-reset mb-4"},e._l(e.selectedPlugin.editions,function(t){return n("li",{staticClass:"flex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginEditionHandle,expression:"pluginEditionHandle"}],staticClass:"mt-1",attrs:{type:"radio",checked:"checked"},domProps:{value:t.handle,checked:e._q(e.pluginEditionHandle,t.handle)},on:{change:function(n){e.pluginEditionHandle=t.handle}}}),n("div",{staticClass:"ml-2"},[n("h3",[e._v(e._s(t.name))]),n("p",[e._v("\n                   $"+e._s(t.price)+" (License + 1 year of updates)"),n("br"),n("em",[e._v("Then $"+e._s(t.renewalPrice)+"/year")])])])])})):e._e(),n("div",{staticClass:"buttons mb-4"},[n("input",{staticClass:"btn btn-primary",class:{disabled:!e.selectedPluginHandle},attrs:{type:"button",disabled:!e.selectedPluginHandle,value:"Add to cart"},on:{click:function(t){e.addToCart(e.selectedPluginHandle)}}})]),n("p",[e._v("(Redirects to /buy-plugin/"+e._s(e.selectedPluginHandle)+"/"+e._s(e.pluginEditionHandle)+")")])])},yi=[],wi={data:function(){return{loading:!1,selectedPluginHandle:"",pluginEditionHandle:"standard"}},computed:Object(ee["a"])({},Object(i["d"])({plugins:function(e){return e.pluginStore.plugins}}),Object(i["c"])({getPluginByHandle:"pluginStore/getPluginByHandle"}),{handle:function(){return this.$route.params.handle},selectedPlugin:function(){return this.getPluginByHandle(this.selectedPluginHandle)},commercialPlugins:function(){return this.plugins.filter(function(e){return e.editions[0].price>0})}}),methods:Object(ee["a"])({},Object(i["b"])({getPluginStoreData:"pluginStore/getPluginStoreData"}),{addToCart:function(){this.$router.push({path:"/buy-plugin/"+this.selectedPluginHandle+"/"+this.pluginEditionHandle})}}),mounted:function(){var e=this;0===this.plugins.length&&(this.loading=!0,this.getPluginStoreData().then(function(t){e.loading=!1}).catch(function(t){e.loading=!1}))}},Li=wi,ki=Object(pe["a"])(Li,Ci,yi,!1,null,null,null);ki.options.__file="BuyLicense.vue";var xi=ki.exports,Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Cart")]),e.loading?n("div",{staticClass:"spinner"}):[e.cart?[e.cartItems.length?[n("table",{staticClass:"table"},[e._m(0),n("tbody",[e._l(e.cartItems,function(t,s){return n("tr",["cms-edition"===t.lineItem.purchasable.type?[n("td",{staticClass:"icon-col"},[n("div",{staticClass:"plugin-icon"},[n("img",{attrs:{src:e.craftLogo,width:"42",height:"42"}})])]),n("td",[e._v("Craft "+e._s(t.lineItem.purchasable.name))])]:[n("td",{staticClass:"icon-col"},[t.plugin?n("div",{staticClass:"plugin-icon"},[t.plugin.iconUrl?n("img",{attrs:{src:t.plugin.iconUrl,width:"42",height:"42"}}):e._e()]):e._e()]),n("td",[n("strong",{staticClass:"text-xl"},[e._v(e._s(t.lineItem.purchasable.plugin.name))]),n("div",{staticClass:"text-secondary"},[e._v("\n                                    "+e._s(t.lineItem.purchasable.name)+"\n                                ")])])],n("td",[n("select-field",{attrs:{options:e.itemUpdateOptions(s)},model:{value:e.itemUpdates[s],callback:function(t){e.$set(e.itemUpdates,s,t)},expression:"itemUpdates[itemKey]"}})],1),n("td",[n("select-field",{attrs:{value:"1",options:e.quantityOptions}})],1),n("td",{staticClass:"text-right"},[n("strong",{staticClass:"block text-xl"},[e._v(e._s(e._f("currency")(t.lineItem.total)))]),n("a",{on:{click:function(t){e.removeFromCart(s)}}},[e._v("Remove")])])],2)}),n("tr",[n("th",{staticClass:"text-right text-xl",attrs:{colspan:"4"}},[e._v("Total")]),n("td",{staticClass:"text-right text-xl"},[n("strong",[e._v(e._s(e._f("currency")(e.cart.totalPrice)))])])])],2),n("cart-mock")],1),n("div",{staticClass:"mt-4 text-right"},[n("input",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button",value:"Check Out"},on:{click:function(t){e.checkout()}}})])]:n("div",[n("div",{staticClass:"empty"},[n("div",{staticClass:"empty-body"},[n("font-awesome-icon",{staticClass:"text-5xl mb-4 text-grey",attrs:{icon:"shopping-cart"}}),n("div",{staticClass:"font-bold"},[e._v("Your cart is empty")]),n("div",{staticClass:"mt-4"},[n("router-link",{staticClass:"btn btn-primary",attrs:{to:"/buy"}},[e._v("Buy a license")])],1)],1)])])]:e._e()]],2)},Pi=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{colspan:"2"}},[e._v("Item")]),n("th",[e._v("Updates")]),n("th",[e._v("Quantity")]),n("th")])])}],$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.mockCart.items.length>0?n("tbody",[e._m(0),e._l(e.mockCart.items,function(t,s){return n("tr",[n("td"),n("td",{attrs:{colspan:"2"}},[e._v("Renewal")]),n("td",[e._v(e._s(e._f("currency")(t.lineItem.total)))]),n("td",{staticClass:"text-right"},[n("a",{on:{click:function(t){e.removeFromCartMock(s)}}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1)])])}),n("tr",[n("th",{staticClass:"text-right",attrs:{colspan:"3"}},[e._v("Renewal Total")]),n("th",[e._v(e._s(e._f("currency")(e.cartTotal)))]),n("td",{staticClass:"thin"})])],2):e._e()},Ii=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{attrs:{colspan:"5"}},[e._v("Renewals")])])}],Si={data:function(){return{loading:!1}},computed:Object(ee["a"])({},Object(i["d"])({mockCart:function(e){return e.cart.mockCart}}),Object(i["c"])({cartTotal:"cart/cartTotal"}))},Oi=Si,Ti=Object(pe["a"])(Oi,$i,Ii,!1,null,null,null);Ti.options.__file="CartMock.vue";var Ai=Ti.exports,Ni={components:Object(ee["a"])({},Le["a"],{CartMock:Ai}),data:function(){return{loading:!1,itemUpdates:{}}},computed:Object(ee["a"])({},Object(i["d"])({cart:function(e){return e.cart.cart}}),Object(i["c"])({cartItems:"cart/cartItems"}),{quantityOptions:function(){return[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5}]}}),methods:Object(ee["a"])({},Object(i["b"])({getCart:"cart/getCart",removeFromCart:"cart/removeFromCart",createCart:"cart/createCart",removeFromCartMock:"cart/removeFromCartMock",getPluginStoreData:"pluginStore/getPluginStoreData"}),{checkout:function(){this.$router.push({path:"/payment"})},itemUpdateOptions:function(e){return[{label:"Updates Until 9/28/2019 (Free)",value:""}]}}),mounted:function(){var e=this;this.loading=!0,this.getPluginStoreData().then(function(){e.getCart().then(function(){e.loading=!1}).catch(function(){e.loading=!1})}).catch(function(){e.loading=!1})}},Ei=Ni,Ui=Object(pe["a"])(Ei,Di,Pi,!1,null,null,null);Ui.options.__file="Cart.vue";var Mi=Ui.exports,ji=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Payment")]),e.error?n("div",[e._v(e._s(e.error))]):e._e(),e.cart?[n("form",{on:{submit:function(t){t.preventDefault(),e.pay()}}},[n("div",{staticClass:"md:flex -mx-8"},[n("div",{staticClass:"md:w-1/2 px-8"},[n("h2",[e._v("Payment Method")]),n("payment-method",{ref:"paymentMethod",attrs:{card:e.card,cardToken:e.cardToken,paymentMode:e.paymentMode,replaceCard:e.replaceCard},on:{"update:paymentMode":function(t){e.paymentMode=t},"update:replaceCard":function(t){e.replaceCard=t}}}),n("h2",{staticClass:"mt-4"},[e._v("Coupon Code")]),n("coupon-code")],1),n("div",{staticClass:"md:w-1/2 px-8 border-l"},[n("h2",[e._v("Billing Informations")]),n("billing-infos",{attrs:{billingInfo:e.billingInfo,errors:e.errors}})],1)]),n("div",{staticClass:"text-center mt-8"},[n("input",{staticClass:"btn btn-lg btn-primary",attrs:{type:"submit"},domProps:{value:"Pay "+e.$options.filters.currency(e.cart.totalPrice)}}),e.payLoading?n("div",{staticClass:"spinner"}):e._e(),e._m(0)])])]:n("div",{staticClass:"spinner"})],2)},Ri=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-4"},[n("img",{attrs:{src:"/craftnetresources/id/dist/images/powered_by_stripe.svg",height:"18"}})])}],Fi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.card?[n("p",[n("label",[n("input",{attrs:{type:"radio",value:"existingCard",name:"paymentMode"},domProps:{checked:"existingCard"===e.paymentMode},on:{input:function(t){e.$emit("update:paymentMode",t.target.value)}}}),e._v(" Use card "),n("span",[e._v(e._s(e.card.brand)+" •••• •••• •••• "+e._s(e.card.last4)+" — "+e._s(e.card.exp_month)+"/"+e._s(e.card.exp_year))])])])]:e._e(),n("p",[n("label",[n("input",{attrs:{type:"radio",value:"newCard",name:"paymentMode"},domProps:{checked:"newCard"===e.paymentMode},on:{input:function(t){e.$emit("update:paymentMode",t.target.value)}}}),e._v(" Use a new credit card")])]),"newCard"===e.paymentMode?[e.cardToken?n("p",[e._v(e._s(e.cardToken.card.brand)+" •••• •••• •••• "+e._s(e.cardToken.card.last4)+" ("+e._s(e.cardToken.card.exp_month)+"/"+e._s(e.cardToken.card.exp_year)+") "),n("a",{staticClass:"delete icon",on:{click:function(t){e.cardToken=null}}},[e._v("Delete")])]):n("card-element",{ref:"newCard"}),n("checkbox-field",{attrs:{id:"replaceCard",label:"Save as my new credit card",value:e.replaceCard},on:{input:function(t){e.$emit("update:replaceCard",!e.replaceCard)}}})]:e._e()],2)},Bi=[],Vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"cardElement",staticClass:"card-element form-control mb-3",attrs:{id:"card-element"}}),n("p",{staticClass:"text-red",attrs:{id:"card-errors",role:"alert"}})])},Hi=[],Ki={data:function(){return{stripe:null,elements:null,card:null}},methods:{save:function(e,t){this.stripe.createSource(this.card).then(function(n){if(n.error){var s=document.getElementById("card-errors");s.textContent=n.error.message,t(n.error)}else e(n.source)})}},mounted:function(){this.stripe=Stripe(window.stripePublicKey),this.elements=this.stripe.elements({locale:"en"}),this.card=this.elements.create("card",{hidePostalCode:!0});var e=document.createElement("div");this.card.mount(e),this.$refs.cardElement.appendChild(e)}},Xi=Ki,Gi=Object(pe["a"])(Xi,Vi,Hi,!1,null,null,null);Gi.options.__file="CardElement.vue";var Wi=Gi.exports,zi={props:["card","cardToken","paymentMode","replaceCard"],components:Object(ee["a"])({},Le["a"],{CardElement:Wi})},qi=zi,Ji=Object(pe["a"])(qi,Fi,Bi,!1,null,null,null);Ji.options.__file="PaymentMethod.vue";var Yi=Ji.exports,Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("text-field",{attrs:{placeholder:"XXXXXXX",id:"coupon-code",size:"12"}})],1)},Zi=[],ea={components:Object(ee["a"])({},Le["a"])},ta=ea,na=Object(pe["a"])(ta,Qi,Zi,!1,null,null,null);na.options.__file="CouponCode.vue";var sa=na.exports,ia=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("text-field",{attrs:{placeholder:"First Name",id:"first-name",errors:e.errors["billingAddress.firstName"]},model:{value:e.billingInfo.firstName,callback:function(t){e.$set(e.billingInfo,"firstName",t)},expression:"billingInfo.firstName"}}),n("text-field",{attrs:{placeholder:"Last Name",id:"last-name",errors:e.errors["billingAddress.lastName"]},model:{value:e.billingInfo.lastName,callback:function(t){e.$set(e.billingInfo,"lastName",t)},expression:"billingInfo.lastName"}}),n("text-field",{attrs:{placeholder:"Business Name",id:"business-name",errors:e.errors["billingAddress.businessName"]},model:{value:e.billingInfo.businessName,callback:function(t){e.$set(e.billingInfo,"businessName",t)},expression:"billingInfo.businessName"}}),n("text-field",{attrs:{placeholder:"Business Tax ID",id:"business-tax-id",errors:e.errors["billingAddress.businessTaxId"]},model:{value:e.billingInfo.businessTaxId,callback:function(t){e.$set(e.billingInfo,"businessTaxId",t)},expression:"billingInfo.businessTaxId"}}),n("text-field",{attrs:{placeholder:"Address 1",id:"address-1",errors:e.errors["billingAddress.address1"]},model:{value:e.billingInfo.address1,callback:function(t){e.$set(e.billingInfo,"address1",t)},expression:"billingInfo.address1"}}),n("text-field",{attrs:{placeholder:"Address 2",id:"address-2",errors:e.errors["billingAddress.address2"]},model:{value:e.billingInfo.address2,callback:function(t){e.$set(e.billingInfo,"address2",t)},expression:"billingInfo.address2"}}),n("div",{staticClass:"md:flex -mx-2"},[n("div",{staticClass:"md:w-1/2 px-2"},[n("text-field",{attrs:{placeholder:"City",id:"city",errors:e.errors["billingAddress.city"]},model:{value:e.billingInfo.city,callback:function(t){e.$set(e.billingInfo,"city",t)},expression:"billingInfo.city"}})],1),n("div",{staticClass:"md:w-1/2 px-2"},[n("text-field",{attrs:{placeholder:"Zip Code",id:"zip-code",errors:e.errors["billingAddress.zipCode"]},model:{value:e.billingInfo.zipCode,callback:function(t){e.$set(e.billingInfo,"zipCode",t)},expression:"billingInfo.zipCode"}})],1)]),n("div",{staticClass:"md:flex -mx-2"},[n("div",{staticClass:"md:w-1/2 px-2"},[n("select-field",{attrs:{fullwidth:!0,options:[{label:"Country",value:0},{label:"France",value:"FR"},{label:"Angola",value:"AO"}],id:"country",errors:e.errors["billingAddress.country"]},model:{value:e.billingInfo.country,callback:function(t){e.$set(e.billingInfo,"country",t)},expression:"billingInfo.country"}})],1),n("div",{staticClass:"md:w-1/2 px-2"},[n("select-field",{attrs:{fullwidth:!0,options:[{label:"State",value:0}],id:"state",errors:e.errors["billingAddress.state"]},model:{value:e.billingInfo.state,callback:function(t){e.$set(e.billingInfo,"state",t)},expression:"billingInfo.state"}})],1)])],1)},aa=[],ra={props:["billingInfo","errors"],components:Object(ee["a"])({},Le["a"])},oa=ra,ca=Object(pe["a"])(oa,ia,aa,!1,null,null,null);ca.options.__file="BillingInfos.vue";var la=ca.exports,da={data:function(){return{billingInfo:{firstName:"",lastName:"",businessName:"",businessTaxId:"",address1:"",address2:"",country:"",state:"",city:"",zipCode:""},billingInfoErrors:{},paymentMode:"newCard",replaceCard:!1,loading:!1,payLoading:!1,error:null,errors:{},cardToken:null}},components:Object(ee["a"])({},Le["a"],{PaymentMethod:Yi,CouponCode:sa,BillingInfos:la}),computed:Object(ee["a"])({},Object(i["d"])({cart:function(e){return e.cart.cart},card:function(e){return e.account.card},existingCardToken:function(e){return e.account.cardToken},accountBillingAddress:function(e){return e.account.billingAddress}}),Object(i["c"])({cartTotal:"cart/cartTotal"})),methods:Object(ee["a"])({},Object(i["b"])({getCart:"cart/getCart"}),{pay:function(){var e=this;this.payLoading=!0,this.savePaymentMethod().then(function(){e.errors={},e.saveBillingInfos().then(function(){e.processPayment().then(function(){e.$root.displayNotice("Payment processed."),e.payLoading=!1,e.$router.push({path:"/thank-you"})}).catch(function(){e.$root.displayError("Couldn’t process payment."),e.payLoading=!1})}).catch(function(t){var n={};t.response.data.errors&&t.response.data.errors.forEach(function(e){n[e.param]=[e.message]}),e.errors=n,e.$root.displayError("Couldn’t save billing infos."),e.payLoading=!1})}).catch(function(t){throw e.$root.displayError("Couldn’t save payment method."),e.payLoading=!1,t})},savePaymentMethod:function(){var e=this;return new Promise(function(t,n){e.cart&&e.cart.totalPrice>0&&"newCard"===e.paymentMode?e.cardToken?t():e.$refs.paymentMethod.$refs.newCard.save(function(n){e.cardToken=n,t()},function(){n(),console.log("failure")}):t()})},saveBillingInfos:function(){var e={billingAddress:{firstName:this.billingInfo.firstName,lastName:this.billingInfo.lastName,businessName:this.billingInfo.businessName,businessTaxId:this.billingInfo.businessTaxId,address1:this.billingInfo.address1,address2:this.billingInfo.address2,country:this.billingInfo.country,state:this.billingInfo.state,city:this.billingInfo.city,zipCode:this.billingInfo.zipCode}};return this.$store.dispatch("cart/saveCart",e)},processPayment:function(){var e=this;console.log("processPayment");var t=null;if(this.cart.totalPrice>0)switch(this.paymentMode){case"newCard":t=this.cardToken.id;break;default:t=this.existingCardToken}var n={orderNumber:this.cart.number,token:t,expectedPrice:this.cart.totalPrice,makePrimary:this.replaceCard};return this.$store.dispatch("cart/checkout",n).then(function(){e.$store.dispatch("craftId/getCraftIdData").then(function(){e.$store.dispatch("cart/resetCart").then(function(){e.loading=!1})})})}}),mounted:function(){var e=this;this.loading=!0,this.getCart().then(function(){e.loading=!1}).catch(function(){e.loading=!1}),this.card&&(this.paymentMode="existingCard"),this.$nextTick(function(){e.billingInfo=JSON.parse(JSON.stringify(e.accountBillingAddress))})}},ua=da,pa=Object(pe["a"])(ua,ji,Ri,!1,null,null,null);pa.options.__file="Payment.vue";var fa=pa.exports,ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Buy Plugin")]),n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[e._v("\n            Adding\n            "),e.plugin?[e._v(e._s(e.plugin.name))]:n("code",[e._v(e._s(e.handle))]),e._v("\n            to your cart…\n\n            "),e.loading?n("div",{staticClass:"spinner"}):e._e()],2)])])},ma=[],va={data:function(){return{loading:!1,plugin:null}},computed:Object(ee["a"])({},Object(i["d"])({plugins:function(e){return e.pluginStore.plugins}}),Object(i["c"])({getPluginByHandle:"pluginStore/getPluginByHandle"}),{handle:function(){return this.$route.params.handle},edition:function(){return this.$route.params.edition}}),methods:Object(ee["a"])({},Object(i["b"])({getPluginStoreData:"pluginStore/getPluginStoreData"}),{addToCart:function(){var e=this;this.plugin=this.getPluginByHandle(this.handle);var t={type:"plugin-edition",plugin:this.handle,edition:this.edition,autoRenew:!1};this.$store.dispatch("cart/addToCart",[t]).then(function(){e.$router.push({path:"/cart"})})}}),mounted:function(){var e=this;0===this.plugins.length?(this.loading=!0,this.getPluginStoreData().then(function(t){e.loading=!1,e.addToCart()}).catch(function(t){e.loading=!1})):this.addToCart()}},ga=va,ba=Object(pe["a"])(ga,ha,ma,!1,null,null,null);ba.options.__file="BuyPlugin.vue";var _a=ba.exports,Ca=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Buy Plugin")]),n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[e._v("\n            Adding\n            "),e.plugin?[e._v(e._s(e.plugin.name))]:n("code",[e._v(e._s(e.handle))]),e._v("\n            to your cart…\n\n            "),e.loading?n("div",{staticClass:"spinner"}):e._e()],2)])])},ya=[],wa={data:function(){return{loading:!1,plugin:null}},computed:Object(ee["a"])({},Object(i["d"])({plugins:function(e){return e.pluginStore.plugins}}),Object(i["c"])({getPluginByHandle:"pluginStore/getPluginByHandle"}),{handle:function(){return this.$route.params.handle},edition:function(){return this.$route.params.edition}}),methods:Object(ee["a"])({},Object(i["b"])({getPluginStoreData:"pluginStore/getPluginStoreData"}),{addToCart:function(){var e=this;this.plugin=this.getPluginByHandle(this.handle);var t=this.plugin.editions.find(function(t){return t.handle===e.edition}),n={type:"plugin-edition",plugin:this.plugin,pluginEditionHandle:this.edition,lineItem:{total:t.price}};this.$store.dispatch("cart/addToCartMock",{item:n}).then(function(t){e.$router.push({path:"/cart"})})}}),mounted:function(){var e=this;0===this.plugins.length?(this.loading=!0,this.getPluginStoreData().then(function(t){e.loading=!1,e.addToCart()}).catch(function(t){e.loading=!1})):this.addToCart()}},La=wa,ka=Object(pe["a"])(La,Ca,ya,!1,null,null,null);ka.options.__file="BuyPluginMock.vue";var xa=ka.exports,Da=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Pa=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Thank You!")]),n("p",[e._v("Your order has been processed successfully.")])])}],$a={},Ia=Object(pe["a"])($a,Da,Pa,!1,null,null,null);Ia.options.__file="ThankYou.vue";var Sa=Ia.exports;s["default"].use(te["a"]);var Oa=new te["a"]({mode:"history",linkActiveClass:"active",canReuse:!1,scrollBehavior:function(e,t,n){return n||{x:0,y:0}},routes:[{path:"/",redirect:"/account/licenses"},{path:"/account",redirect:"/account/billing"},{path:"/account/licenses",redirect:"/account/licenses/cms"},{path:"/account/licenses/cms",component:an},{path:"/account/licenses/cms/:id",component:Wn},{path:"/account/licenses/plugins",component:Zn},{path:"/account/licenses/plugins/:id",component:us},{path:"/account/licenses/claim",component:Gt},{path:"/account/billing",name:"Billing",component:mt},{path:"/account/billing/invoices/:number",name:"BillingInvoiceDetails",component:Rt},{path:"/account/profile",name:"Profile",component:Pe},{path:"/account/settings",name:"Settings",component:fi},{path:"/developer",redirect:"/developer/plugins"},{path:"/developer/plugins",name:"Plugins",component:oi},{path:"/developer/add-plugin",component:ti},{path:"/developer/plugins/:id",name:"PluginsEdit",component:ti},{path:"/developer/sales",name:"Sales",component:Ls},{path:"/developer/sales/:id",name:"SalesDetails",component:Is},{path:"/developer/settings",name:"DeveloperSettings",component:_i},{path:"/buy",name:"BuyLicense",component:xi},{path:"/buy-plugin-mock/:handle/:edition",name:"BuyPluginMock",component:xa},{path:"/buy-plugin/:handle/:edition",name:"BuyPlugin",component:_a},{path:"/cart",name:"Cart",component:Mi},{path:"/payment",name:"Payment",component:fa},{path:"/thank-you",name:"ThankYou",component:Sa}]});Oa.beforeEach(function(e,t,n){Oa.app.$refs.authManager&&Oa.app.$refs.authManager.renewSession(),n()});var Ta=Oa,Aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("modal",{staticClass:"auth-manager-modal",attrs:{show:e.showingLogoutWarningModal,transition:e.logoutWarningModalTransitionName},on:{"update:show":function(t){e.showingLogoutWarningModal=t},"update:transition":function(t){e.logoutWarningModalTransitionName=t},"after-enter":e.onAfterEnterLogoutWarningModal}},[n("template",{slot:"body"},[n("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("\n            "+e._s(e.logoutWarningPara)+"\n\n            "),n("div",{staticClass:"float-right mt-4"},[n("a",{staticClass:"btn btn-secondary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("Logout now")]),n("a",{ref:"renewSessionBtn",staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.renewSession(t)}}},[e._v("Keep me logged in")])])],1)],2),n("modal",{staticClass:"auth-manager-modal",attrs:{show:e.showingLoginModal,transition:e.loginModalTransitionName},on:{"update:show":function(t){e.showingLoginModal=t},"update:transition":function(t){e.loginModalTransitionName=t},"after-enter":e.onAfterEnterLoginModal,leave:e.onLeaveLoginModal}},[n("template",{slot:"body"},[n("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("h6",[e._v("Your session has ended")]),n("p",[e._v("Enter your password to log back in.")]),n("div",[n("div",{staticClass:"flex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"passwordInput",staticClass:"form-control mr-2",class:{"is-invalid":e.loginErrorPara},attrs:{placeholder:"Password",type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("input",{staticClass:"btn btn-primary mr-2",attrs:{type:"submit",value:"Login",disabled:!e.passwordValidates}}),n("div",{staticClass:"spinner",class:{invisible:!e.passwordSpinner}})])]),e.loginErrorPara?n("div",{staticClass:"text-red"},[e._v("\n                    "+e._s(e.loginErrorPara)+"\n                ")]):e._e()])],1)],2)],1)},Na=[],Ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:e.transition},on:{enter:function(t){e.$emit("enter")},"after-enter":function(t){e.$emit("after-enter")},leave:function(t){e.$emit("leave")}}},[e.show?n("div",{staticClass:"modal",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},on:{click:e.test}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[e.$slots.header?n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._t("header")],2)]):e._e(),n("div",{staticClass:"modal-body"},[e._t("body")],2),e.$slots.footer?n("div",{staticClass:"modal-footer"},[e._t("footer")],2):e._e()])])]):e._e()])},Ua=[],Ma={props:["show","transition"],methods:{test:function(e){e.target.classList.contains("modal")&&this.$emit("background-click")}}},ja=Ma,Ra=Object(pe["a"])(ja,Ea,Ua,!1,null,null,null);Ra.options.__file="Modal.vue";var Fa=Ra.exports,Ba=n("c6c6"),Va=n.n(Ba),Ha={methods:{isMobileBrowser:function(e){var t=navigator.userAgent||navigator.vendor||window.opera,n=new Va.a(t);if(e){if(n.mobile())return!0}else if(n.phone())return!0;return!1}}},Ka=n("8f14"),Xa=n.n(Ka),Ga={components:{Modal:Fa},mixins:[Ha],data:function(){return{showingLoginModal:!1,showingLogoutWarningModal:!1,logoutWarningPara:null,loginErrorPara:null,password:null,passwordValidates:!1,logoutWarningModalTransitionName:"fade",loginModalTransitionName:"quick-fade",passwordSpinner:!1,minSafeSessionTime:120,checkInterval:60}},methods:{setCheckRemainingSessionTimer:function(e){this.checkRemainingSessionTimer&&clearTimeout(this.checkRemainingSessionTimer),this.checkRemainingSessionTimer=setTimeout(function(){this.checkRemainingSessionTime()}.bind(this),1e3*e)},checkRemainingSessionTime:function(e){var t=this,n={};e||(n.params={dontExtendSession:1}),r.a.get(Craft.actionUrl+"/users/get-remaining-session-time",n).then(function(e){"undefined"!==typeof e.data.csrfTokenValue&&"undefined"!==typeof Craft.csrfTokenValue&&(Craft.csrfTokenValue=e.data.csrfTokenValue),t.updateRemainingSessionTime(e.data.timeout),t.submitLoginIfLoggedOut=!1}).catch(function(e){t.updateRemainingSessionTime(-1)})},updateRemainingSessionTime:function(e){this.remainingSessionTime=parseInt(e),-1!==this.remainingSessionTime&&this.remainingSessionTime<this.minSafeSessionTime?(this.remainingSessionTime?(this.showingLogoutWarningModal||this.showLogoutWarningModal(),this.remainingSessionTime<this.checkInterval&&(this.showLoginModalTimer&&clearTimeout(this.showLoginModalTimer),this.showLoginModalTimer=setTimeout(function(){this.showLoginModal()}.bind(this),1e3*this.remainingSessionTime))):this.showingLoginModal?this.submitLoginIfLoggedOut&&this.submitLogin():this.showLoginModal(),this.setCheckRemainingSessionTimer(this.checkInterval)):(this.hideLogoutWarningModal(),this.hideLoginModal(),-1!==this.remainingSessionTime&&this.remainingSessionTime<this.minSafeSessionTime+this.checkInterval?this.setCheckRemainingSessionTimer(this.remainingSessionTime-this.minSafeSessionTime+1):this.setCheckRemainingSessionTimer(this.checkInterval))},showLogoutWarningModal:function(){var e,t=this;this.showingLoginModal?(this.hideLoginModal(!0),e=!0):e=!1,this.logoutWarningModalTransitionName=e?"quick-fade":"fade",this.$nextTick(function(){t.showingLogoutWarningModal=!0}),this.updateLogoutWarningMessage(),this.decrementLogoutWarningInterval=setInterval(function(){this.decrementLogoutWarning()}.bind(this),1e3)},onAfterEnterLogoutWarningModal:function(){this.isMobileBrowser(!0)||this.$refs.renewSessionBtn.focus()},updateLogoutWarningMessage:function(){var e=Xa()(1e3*this.remainingSessionTime);this.logoutWarningPara="Your session will expire in "+e+"."},decrementLogoutWarning:function(){this.remainingSessionTime>0&&(this.remainingSessionTime--,this.updateLogoutWarningMessage()),0===this.remainingSessionTime&&clearInterval(this.decrementLogoutWarningInterval)},hideLogoutWarningModal:function(e){var t=this;this.logoutWarningModalTransitionName=e?"quick-fade":"fade",this.$nextTick(function(){t.showingLogoutWarningModal=!1}),this.decrementLogoutWarningInterval&&clearInterval(this.decrementLogoutWarningInterval)},showLoginModal:function(){var e,t=this;this.showingLogoutWarningModal?(this.hideLogoutWarningModal(!0),e=!0):e=!1,this.loginModalTransitionName=e?"quick-fade":"fade",this.$nextTick(function(){t.showingLoginModal=!0})},onAfterEnterLoginModal:function(){this.isMobileBrowser(!0)||this.$refs.passwordInput.focus()},hideLoginModal:function(e){var t=this;this.loginModalTransitionName=e?"quick-fade":"fade",this.$nextTick(function(){t.showingLoginModal=!1})},onLeaveLoginModal:function(){this.password=""},logout:function(){r.a.get(Craft.actionUrl+"/users/logout").then(function(e){document.location.href=""})},renewSession:function(){this.hideLogoutWarningModal(),this.checkRemainingSessionTime(!0)},validatePassword:function(){return this.password.length>=6?(this.passwordValidates=!0,!0):(this.passwordValidates=!1,!1)},login:function(){this.validatePassword()&&(this.passwordSpinner=!0,this.clearLoginError(),"undefined"!==typeof Craft.csrfTokenValue?(this.submitLoginIfLoggedOut=!0,this.checkRemainingSessionTime()):this.submitLogin())},submitLogin:function(){var e=this,t={loginName:Craft.username,password:this.password},n=c.a.stringify(t),s={};Craft.csrfTokenValue&&Craft.csrfTokenName&&(s["X-CSRF-Token"]=Craft.csrfTokenValue),r.a.post(Craft.actionUrl+"/users/login",n,{headers:s}).then(function(t){e.passwordSpinner=!1,t.data.success?(e.hideLoginModal(),e.checkRemainingSessionTime()):(e.showLoginError(t.data.error),e.isMobileBrowser(!0)||e.$refs.passwordInput.focus())}).catch(function(t){e.passwordSpinner=!1,e.showLoginError()})},showLoginError:function(e){null!==e&&"undefined"!==typeof e||(e="An unknown error occurred."),this.loginErrorPara=e},clearLoginError:function(){this.showLoginError("")}},watch:{password:function(e){return this.validatePassword(),e}},mounted:function(){this.updateRemainingSessionTime(Craft.remainingSessionTime)}},Wa=Ga,za=Object(pe["a"])(Wa,Aa,Na,!1,null,null,null);za.options.__file="AuthManager.vue";var qa=za.exports,Ja=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.license?n("div",{attrs:{id:"renew-licenses-modal"}},[n("modal",{attrs:{show:!0},on:{"background-click":function(t){e.$emit("cancel")}}},[n("template",{slot:"body"},[n("renew-licenses-form",{attrs:{license:e.license},on:{cancel:function(t){e.$emit("cancel")}}})],1)],2)],1):e._e()},Ya=[],Qa={props:["license"],components:{Modal:Fa,RenewLicensesForm:An}},Za=Qa,er=Object(pe["a"])(Za,Ja,Ya,!1,null,null,null);er.options.__file="RenewLicensesModal.vue";var tr=er.exports,nr=n("c7db"),sr={directives:{onClickaway:nr["directive"]},router:Ta,components:{AuthManager:qa,RenewLicensesModal:tr},data:function(){return{showingSidebar:!1,showingUserMenu:!1,showingGlobalMenu:!1}},computed:Object(ee["a"])({},Object(i["d"])({currentUser:function(e){return e.account.currentUser}}),Object(i["c"])({userIsInGroup:"account/userIsInGroup",cartTotalItems:"cart/cartTotalItems"})),methods:{toggleSidebar:function(){this.showingSidebar=!this.showingSidebar},closeSidebar:function(){this.showingSidebar=!1},awayUserMenu:function(e){!0===this.showingUserMenu&&(this.showingUserMenu=!1)},awayGlobalMenu:function(e){!0===this.showingGlobalMenu&&(this.showingGlobalMenu=!1)},userMenuToggle:function(){this.showingUserMenu=!this.showingUserMenu},globalMenuToggle:function(){this.showingGlobalMenu=!this.showingGlobalMenu}},created:function(){var e=this;this.$store.dispatch("craftId/getCraftIdData").then(function(){e.$root.loading=!1}),window.stripeAccessToken?this.$store.dispatch("account/getStripeAccount").then(function(t){e.$root.stripeAccountLoading=!1},function(t){e.$root.stripeAccountLoading=!1}):this.$root.stripeAccountLoading=!1,this.$store.dispatch("account/getInvoices").then(function(t){e.$root.invoicesLoading=!1}).catch(function(t){e.$root.invoicesLoading=!1}),window.sessionNotice&&this.$root.displayNotice(window.sessionNotice),window.sessionError&&this.$root.displayError(window.sessionError)}},ir=sr,ar=(n("4b04"),Object(pe["a"])(ir,Q,Z,!1,null,null,null));ar.options.__file="App.vue";var rr=ar.exports,or=n("7a55"),cr=n("ecee"),lr=n("c074"),dr=n("1dce"),ur=n.n(dr);cr["library"].add([lr["c"],lr["m"],lr["l"],lr["a"],lr["j"],lr["g"],lr["i"],lr["f"],lr["n"],lr["h"],lr["e"],lr["b"],lr["k"],lr["d"]]),s["default"].component("font-awesome-icon",or["FontAwesomeIcon"]),s["default"].config.productionTip=!1,s["default"].filter("currency",z),s["default"].filter("formatCmsLicense",q),s["default"].filter("formatPluginLicense",J),s["default"].filter("capitalize",Y),s["default"].use(n("2ead")),s["default"].use(ur.a),window.craftIdApp=new s["default"]({store:G,render:function(e){return e(rr)},data:function(){return{invoicesLoading:!0,stripeAccountLoading:!0,loading:!0,notification:null,renewLicense:null,showRenewLicensesModal:!1}},methods:{connectAppCallback:function(e){this.$store.dispatch("account/connectAppCallback",e),this.$root.displayNotice("App connected.")},displayNotice:function(e){this.displayNotification("success",e)},displayError:function(e){this.displayNotification("error",e)},displayNotification:function(e,t){this.notification={type:e,message:t},setTimeout(function(){this.notification=null}.bind(this),2e3)}}}).$mount("#app")},cbec:function(e,t,n){}});
//# sourceMappingURL=app.js.map